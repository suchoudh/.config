"use strict";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}chrome.extension.onMessage.addListener(function(t,e,i){var s=chrome.i18n.getMessage,n=function(){m.iframe=document.createElement("iframe"),m.iframe.src="chrome-extension://"+chrome.runtime.id+"/popup.html",m.iframe.id="gnotes-iframe",document.body.appendChild(m.iframe),a(),r()},o=function(){m.$status=$('<div id="gnotes-ext-status"><div class="gnotes-ext-status"></div></div>'),$("body").append(m.$status),m.$status.css({visibility:"hidden",position:"fixed",top:"50px",left:"50%",transform:"translateX(-50%)","margin-top":"-20px","z-index":99999999}).find(".gnotes-ext-status").css({display:"inline-block","font-size":"14px",border:"1px solid #607D8B","background-color":"#607D8B",padding:"0 15px","border-radius":"2px","box-shadow":"0 2px 4px rgba(0,0,0,0.2)",color:"#fff","line-height":"40px"})},a=function(){var t,e=document.body.clientTop+20+"px",i="60px";$("#gnotes-iframe").css((t={position:"fixed","z-index":0x27797f26d671c8,height:"400px",width:"345px",border:0,top:e,right:i},_defineProperty(t,"border","1px solid #ececec"),_defineProperty(t,"box-shadow","0 0 10px rgba(0,0,0,.15)"),t))},r=function(){window.addEventListener("message",function(t){"load completed"==t.data?l():"add success"==t.data.status?(d(t.data),"frame"==t.data.from&&f()):"add failed"==t.data.status?(c(),"frame"==t.data.from&&f()):"close iframe"==t.data?f():"not_sign_on"==t.data.status&&(u(t.data),f())})},d=function(t){var e=s("createSuccess")+", <a href='"+t.target+"' target='_blank' style='color: #def7f0; text-decoration: underline; font-weight: bold; cursor: pointer'>"+s("createSuccessCheck")+"</a>";m.$status.css("visibility","visible").find(".gnotes-ext-status").html(e),setTimeout(function(){m.$status.css("visibility","hidden")},3e3)},c=function(){var t=s("createFail");m.$status.css("visibility","visible").find(".gnotes-ext-status").html(t),setTimeout(function(){m.$status.css("visibility","hidden")},3e3)},u=function(t){var e=s("needLogin")+", <a href='"+t.target+"' target='_blank' style='color: #def7f0; text-decoration: underline; font-weight: bold; cursor: pointer'>"+s("login")+"</a>";m.$status.css("visibility","visible").find(".gnotes-ext-status").html(e),setTimeout(function(){m.$status.css("visibility","hidden")},3e3)},f=function(){$("#gnotes-iframe").remove()},l=function(){var e=m.iframe.contentWindow;t.status="init content",e&&e.postMessage(t,"chrome-extension://"+chrome.runtime.id+"/popup.html")};$("#gnotes-iframe").length&&f(),$("#gnotes-ext-status").length&&$("#gnotes-ext-status").remove();var m={};"openFrame"===t.action.action&&(n(),o())});
//# sourceMappingURL=context.js.map
