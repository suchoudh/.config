var webkit_tools={$:function(a){if(typeof(a)=="string"){return document.getElementById(a)}return a},extend:function(d,c){for(var e in c){d[e]=c[e]}return d},empty:function(){},compact:function(e){var c=[];var d=e.length;for(var f=0;f<d;f++){if(e[f]!==null){c.push(e[f])}}return c},getCalculatedStyle:function(a,b){var c="";if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(d,e){return e.toUpperCase()});c=a.currentStyle[b]}}return c},bindAsEventListener:function(c,b){var a=c;return function(d){a.call(b,d||window.event)}},cumulativeOffset:function(b){var a=0,c=0;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;if(b.offsetParent==document.body){if(b.style.position=="absolute"){break}}b=b.offsetParent}while(b);return{left:c,top:a}},getDimensions:function(c){var g=c.style.display;if(g!="none"&&g!=null){return{width:c.offsetWidth,height:c.offsetHeight}}var b=c.style;var f=b.visibility;var d=b.position;var a=b.display;b.visibility="hidden";if(d!="fixed"){b.position="absolute"}b.display="block";var h=c.clientWidth;var e=c.clientHeight;b.display=a;b.position=d;b.visibility=f;return{width:h,height:e}},hasClassName:function(a,b){var c=a.className;return(c.length>0&&(c==b||new RegExp("(^|\\s)"+b+"(\\s|$)").test(c)))},addClassName:function(a,b){if(!this.hasClassName(a,b)){a.className+=(a.className?" ":"")+b}return a},removeClassName:function(a,b){a.className=this.strip(a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));return a},strip:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}};var webkit_droppables=function(){this.initialize=function(){this.droppables=[];this.droppableRegions=[]};this.add=function(a,c){a=webkit_tools.$(a);var b={accept:[],hoverClass:null,onDrop:webkit_tools.empty,onOver:webkit_tools.empty,onOut:webkit_tools.empty};b=webkit_tools.extend(b,c||{});this.droppables.push({r:a,p:b})};this.remove=function(a){a=webkit_tools.$(a);var c=this.droppables;var b=c.length;while(b--){if(c[b].r==a){c[b]=null;this.droppables=webkit_tools.compact(c);return true}}return false};this.prepare=function(){var e=this.droppables;var a=e.length;var c=[];var b=null;while(a--){b=e[a].r;if(b.style.display!="none"){c.push({i:a,size:webkit_tools.getDimensions(b),offset:webkit_tools.cumulativeOffset(b)})}}this.droppableRegions=c};this.finalize=function(a,h,c,f){var g=this.isOver(a,h);var b=this.maxZIndex(g);var d=this.process(b,c);if(d){this.drop(b,c,f)}this.process(-1,c);return d};this.check=function(a,e,c){var d=this.isOver(a,e);var b=this.maxZIndex(d);return this.process(b,c)};this.isOver=function(k,j){var h=this.droppableRegions;var g=h.length;var e=[];var b=0;var c=0;var f=0;var a=0;var d=0;while(g--){b=h[g];d=b.offset.top;a=d+b.size.height;if((j>d)&&(j<a)){f=b.offset.left;c=f+b.size.width;if((k>f)&&(k<c)){e.push(b.i)}}}return e};this.maxZIndex=function(f){var e=this.droppables;var a=f.length;var b=-1;var c=-100000000;var g=0;while(a--){g=parseInt(e[f[a]].r.style.zIndex||0);if(g>c){c=g;b=f[a]}}return b};this.process=function(a,c){if(this.lastIndex!=a){if(this.lastIndex!=null){var f=this.droppables[this.lastIndex];var e=f.p;var b=f.r;if(e.hoverClass){webkit_tools.removeClassName(b,e.hoverClass)}e.onOut();this.lastIndex=null;this.lastOutput=false}if(a!=-1){var f=this.droppables[a];var e=f.p;var b=f.r;if(this.hasClassNames(c,e.accept)){if(e.hoverClass){webkit_tools.addClassName(b,e.hoverClass)}e.onOver();this.lastIndex=a;this.lastOutput=true}}}return this.lastOutput};this.drop=function(a,b,c){if(a!=-1){this.droppables[a].p.onDrop(b,c)}};this.hasClassNames=function(b,c){var a=c.length;if(a==0){return true}while(a--){if(webkit_tools.hasClassName(b,c[a])){return true}}return false};this.initialize()};webkit_drop=new webkit_droppables();var webkit_draggable=function(a,b){this.initialize=function(c,e){this.root=webkit_tools.$(c);var d={scroll:false,revert:false,handle:this.root,zIndex:1000,onStart:webkit_tools.empty,onEnd:webkit_tools.empty};this.p=webkit_tools.extend(d,e||{});d.handle=webkit_tools.$(d.handle);this.prepare();this.bindEvents()};this.prepare=function(){var c=this.root.style;if(webkit_tools.getCalculatedStyle(this.root,"position")!="absolute"){c.position="relative"}c.top=c.top||"0px";c.left=c.left||"0px";c.right="";c.bottom="";c.zIndex=c.zIndex||"0"};this.bindEvents=function(){var c=this.p.handle;this.ts=webkit_tools.bindAsEventListener(this.touchStart,this);this.tm=webkit_tools.bindAsEventListener(this.touchMove,this);this.te=webkit_tools.bindAsEventListener(this.touchEnd,this);c.addEventListener("touchstart",this.ts,false);c.addEventListener("touchmove",this.tm,false);c.addEventListener("touchend",this.te,false)};this.destroy=function(){var c=this.p.handle;c.removeEventListener("touchstart",this.ts);c.removeEventListener("touchmove",this.tm);c.removeEventListener("touchend",this.te)};this.set=function(c,d){this.p[c]=d};this.touchStart=function(g){var i=this.p;var f=this.root;var c=f.style;var e=g.targetTouches[0];touchX=e.pageX;touchY=e.pageY;c.top=this.root.style.top||"0px";c.left=this.root.style.left||"0px";c.bottom=null;c.right=null;var d=webkit_tools.cumulativeOffset(f);var h=this.getPosition();i.rx=h.x;i.ry=h.y;i.tx=touchX;i.ty=touchY;i.z=parseInt(this.root.style.zIndex);c.zIndex=i.zIndex;webkit_drop.prepare();i.onStart()};this.touchMove=function(d){d.preventDefault();d.stopPropagation();var f=this.p;var c=this.root;var h=c.style;var k=d.targetTouches[0];if(k==null){return}var g=k.pageX;var e=k.pageY;var j=g-f.tx;var i=e-f.ty;if(isFullScreen){j=j/fullScreenScaleRatio;i=i/fullScreenScaleRatio}h.left=f.rx+j+"px";h.top=f.ry+i+"px";if(f.scroll){s=this.getScroll(g,e);if((s[0]!=0)||(s[1]!=0)){window.scrollTo(window.scrollX+s[0],window.scrollY+s[1])}}webkit_drop.check(g,e,c);this.lastCurX=g;this.lastCurY=e};this.touchEnd=function(e){var d=this.root;var f=this.p;var g=webkit_drop.finalize(this.lastCurX,this.lastCurY,d,e);if(((f.revert)&&(!g))||(f.revert==="always")){var c=d.style;c.top=(f.ry+"px");c.left=(f.rx+"px")}d.style.zIndex=this.p.z;this.p.onEnd()};this.getPosition=function(){var c=this.root.style;return{x:parseInt(c.left||0),y:parseInt(c.top||0)}};this.getScroll=function(f,e){var d=window.scrollX;var c=window.scrollY;var l=window.innerWidth;var k=window.innerHeight;var j=10;var h=100;var i=0;var g=0;if(e-c<h){g=-j}else{if((c+k)-e<h){g=j}}if(f-d<h){i=-j}else{if((d+l)-f<h){i=j}}return[i,g]};this.initialize(a,b)};var webkit_click=function(a,b){this.initialize=function(c,e){var d={onClick:webkit_tools.empty};this.root=webkit_tools.$(c);this.p=webkit_tools.extend(d,e||{});this.bindEvents()};this.bindEvents=function(){var c=this.root;this.ts=webkit_tools.bindAsEventListener(this.touchStart,this);this.tm=webkit_tools.bindAsEventListener(this.touchMove,this);this.te=webkit_tools.bindAsEventListener(this.touchEnd,this);c.addEventListener("touchstart",this.ts,false);c.addEventListener("touchmove",this.tm,false);c.addEventListener("touchend",this.te,false);this.bound=true};this.touchStart=function(){this.moved=false;if(this.bound==false){this.root.addEventListener("touchmove",this.tm,false);this.bound=true}};this.touchMove=function(){this.moved=true;this.root.removeEventListener("touchmove",this.tm);this.bound=false};this.touchEnd=function(){if(this.moved==false){this.p.onClick()}};this.setEvent=function(c){if(typeof(c)=="function"){this.p.onClick=c}};this.unbind=function(){var c=this.root;c.removeEventListener("touchstart",this.ts);c.removeEventListener("touchmove",this.tm);c.removeEventListener("touchend",this.te)};this.initialize(a,b)};