var solnSliderValue=0;var contentPos;if(!OSX){}Array.prototype.remove=function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)};String.prototype.splitCSV=function(c){for(var d=this.split(c=c||","),a=d.length-1,b;a>=0;a--){if(d[a].replace(/"\s+$/,'"').charAt(d[a].length-1)=='"'){if((b=d[a].replace(/^\s+"/,'"')).length>1&&b.charAt(0)=='"'){d[a]=d[a].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"')}else{if(a){d.splice(a-1,2,[d[a-1],d[a]].join(c))}else{d=d.shift().split(c).concat(d)}}}else{d[a].replace(/""/g,'"')}}return d};function getstringafterus(a){for(i=0;i<a.length;i++){if(a[i]==="_"){return a.substring(i+1)}}return""}function getstringbeforeus(b){var a="";for(i=0;i<b.length;i++){if(b[i]==="_"){break}a=a+b[i]}return a}var emailSubject="Marble Hop by Foxy Ninja Studios";var emailText="I have been playing Marble Hop and I wanted to tell you about it. Learn more at foxyninjastudios.com/marblehop";var socialText="I have been playing Marble Hop and I wanted to tell you about it. Learn more at foxyninjastudios.com/marblehop";var SLTransitionTime=0;var SLTransitionTimeMS=0;var boardListiScroll;var puzzleListiScroll;var bgMusicObj=new Media("Sounds/bg.mp3");if(chromeOS){bgMusicObj=new Audio("http://apps.foxyninjastudios.com/theLoop/MarbleHop/mobile/Sounds/bg.mp3");bgMusicObj.addEventListener("ended",function(){this.currentTime=0},false)}var currentSelectedSavedBoard="1";var currentSelectedPuzzleCat="info";var currentSelectedPuzzleBoard="none";var lastSolvedPuzzleCat="1";var lastSolvedPuzzleBoard="0";var emptyGame=["13","14","15","23","24","25","31","32","33","34","35","36","37","41","42","43","45","46","47","51","52","53","54","55","56","57","63","64","65","73","74","75"];var fullGame=["44"];localStorage.setItem("SB_1_GAME",fullGame);localStorage.setItem("SB_1_DATE","Wed Dec 15 2010");localStorage.setItem("SB_1_MARB","1");localStorage.setItem("SB_1_NOTE","Full Board!");localStorage.setItem("SB_2_GAME",emptyGame);localStorage.setItem("SB_2_DATE","Wed Dec 15 2010");localStorage.setItem("SB_2_MARB","32");localStorage.setItem("SB_2_NOTE","Empty Board!");var noOfTouchesOnScreen;var puzzleStart;var puzzleEnd;document.addEventListener("touchstart",function(a){noOfTouchesOnScreen=a.touches.length},false);var backgroundImageOpacity;var backgroundOpacityBarLength;var isFullScreen=false;var fullScreenScaleRatio=1.75;var targetPegState;var hintsState;var newGameType="fullBoard";var theBoardSlots=["13","14","15","23","24","25","31","32","33","34","35","36","37","41","42","43","44","45","46","47","51","52","53","54","55","56","57","63","64","65","73","74","75"];var standardGameTemplete=["44"];var currentGame=[];var currentPreviewGame=[];var RGBAColor=[];RGBAColor.Black="rgba(19,19,19,.9)";RGBAColor.Green="rgba(55,205,88,.9)";RGBAColor.Purple="rgba(155,116,255,.9)";RGBAColor.Blue="rgba(105,113,246,.9)";RGBAColor.Red="rgba(212,42,0,.9)";RGBAColor.Orange="rgba(235,115,40,.9)";var validMovesDict=[];var startNewGameAfterSave=false;function getRoman(a){if(a==0){return"0"}if(a==1){return"i"}if(a==2){return"ii"}if(a==3){return"iii"}if(a==4){return"iv"}if(a==5){return"v"}if(a==6){return"vi"}if(a==7){return"vii"}if(a==8){return"viii"}if(a==9){return"ix"}return"error"}function makeArrayCopy(a){var b=[];for(i=0;i<a.length;i++){b[i]=a[i]}return b}function getAllValidMoves(f){var d=[];var e=parseInt(f[0]);var c=parseInt(f[1]);var b;var a;b=e;a=c+2;if(isMoveValid(e,c,b,a)){d[d.length]=b.toString()+a.toString()}b=e;a=c-2;if(isMoveValid(e,c,b,a)){d[d.length]=b.toString()+a.toString()}b=e+2;a=c;if(isMoveValid(e,c,b,a)){d[d.length]=b.toString()+a.toString()}b=e-2;a=c;if(isMoveValid(e,c,b,a)){d[d.length]=b.toString()+a.toString()}return d}function playSound(a){if(isSoundOn==="false"){return}new Media("mobile/Sounds/"+a+".wav").play();if(chromeOS){new Audio("Sounds/"+a+".mp3").play()}return}function hintsHide(){hintsState="hide";localStorage.removeItem("hintsState");localStorage.setItem("hintsState","hide");document.getElementById("hintsareOnButtonN").style.display="none";document.getElementById("hintsareOffButtonN").style.display="block";$(".boardTableTD").removeClass("nextMovePegClass");flashMessage("Hints Visible",5000);return}function hintsShow(){hintsState="show";localStorage.removeItem("hintsState");localStorage.setItem("hintsState","show");document.getElementById("hintsareOnButtonN").style.display="block";document.getElementById("hintsareOffButtonN").style.display="none";updateHints();flashMessage("Hints Hidden",5000);return}function toggleHowToStartUp(){if(howToStartupState==="show"){howtoHide()}else{howtoShow()}}function howtoHide(){howToStartupState="hide";localStorage.removeItem("howToStartupState");localStorage.setItem("howToStartupState","hide");document.getElementById("howtoStartupOnButton").style.display="none";document.getElementById("howtoStartupOffButton").style.display="block";return}function howtoShow(){howToStartupState="show";localStorage.removeItem("howToStartupState");localStorage.setItem("howToStartupState","show");document.getElementById("howtoStartupOnButton").style.display="block";document.getElementById("howtoStartupOffButton").style.display="none";return}function toggleHints(){playSound("tink");if(hintsState==="show"){hintsHide()}else{hintsShow()}}function targetPegHide(){targetPegState="hide";localStorage.removeItem("targetPegState");localStorage.setItem("targetPegState","hide");document.getElementById("tpOnButtonN").style.display="none";document.getElementById("tpOffButtonN").style.display="block";flashMessage("Target Pegs Hidden",5000);return}function targetPegShow(){targetPegState="show";localStorage.removeItem("targetPegState");localStorage.setItem("targetPegState","show");document.getElementById("tpOnButtonN").style.display="block";document.getElementById("tpOffButtonN").style.display="none";flashMessage("Target Pegs Visible",5000);return}function toggleTargetPeg(){playSound("tink");if(targetPegState==="show"){targetPegHide()}else{targetPegShow()}}function turnSoundOff(){isSoundOn="false";localStorage.removeItem("isSoundOn");localStorage.setItem("isSoundOn","false");document.getElementById("soundisOnButtonN").style.display="none";document.getElementById("soundisOffButtonN").style.display="block";flashMessage("Sound Effects Off",2000);return}function turnSoundOn(){isSoundOn="true";localStorage.removeItem("isSoundOn");localStorage.setItem("isSoundOn","true");document.getElementById("soundisOnButtonN").style.display="block";document.getElementById("soundisOffButtonN").style.display="none";flashMessage("Sound Effects On",2000);playSound("viewChange");return}function toggleSound(){playSound("tink");if(isSoundOn==="false"){turnSoundOn()}else{turnSoundOff()}}function turnMusicOff(){isMusicOn="false";localStorage.removeItem("isMusicOn");localStorage.setItem("isMusicOn","false");document.getElementById("musicisOnButtonN").style.display="none";document.getElementById("musicisOffButtonN").style.display="block";if(bgMusicObj){bgMusicObj.pause()}flashMessage("Music is Off",2000);return}function turnMusicOn(){isMusicOn="true";localStorage.removeItem("isMusicOn");localStorage.setItem("isMusicOn","true");document.getElementById("musicisOnButtonN").style.display="block";document.getElementById("musicisOffButtonN").style.display="none";if(bgMusicObj){bgMusicObj.play({numberOfLoops:10000})}flashMessage("Music is On",2000);return}function toggleMusic(){playSound("tink");if(isMusicOn==="false"){turnMusicOn()}else{turnMusicOff()}}function decreaseOpacity(){if(backgroundImageOpacity>=7){return}backgroundImageOpacity=backgroundImageOpacity+1;document.getElementById("mainAreaBackCover").style.opacity="0."+backgroundImageOpacity.toString();backgroundOpacityBarLength=backgroundOpacityBarLength-10;animateOpacityBar();return}function increaseOpacity(){if(backgroundImageOpacity<=0){return}backgroundImageOpacity=backgroundImageOpacity-1;backgroundOpacityBarLength=backgroundOpacityBarLength+10;document.getElementById("mainAreaBackCover").style.opacity="0."+backgroundImageOpacity.toString();animateOpacityBar();return}function animateOpacityBar(){document.getElementById("opacityBar").style.width=backgroundOpacityBarLength.toString()+"px";localStorage.removeItem("backgroundImageOpacity");localStorage.setItem("backgroundImageOpacity",backgroundImageOpacity);localStorage.removeItem("backgroundOpacityBarLength");localStorage.setItem("backgroundOpacityBarLength",backgroundOpacityBarLength);return}function auxMarbleWasClicked(c){playSound("tink");var b=parseInt(c.target.id.substring(10));var a=b.toString();if(isAMemberof(a,currentPreviewGame)){if(currentPreviewGame.length>1){addMarbleToPreviewBoard(a)}else{flashMessage("Board is full...",1500)}}else{if(currentPreviewGame.length<32){removeMarbleFromPreviewBoard(a)}else{flashMessage("Board is empty...",1500)}}return}function debug(){}function startNewFullBoardGame(){$("#puzzleTools").fadeOut("fast");exercizeMode=false;flashLoadingBox("Setting up New Board",800);newGameType="fullBoard";Stack.empty();setupNewGame(standardGameTemplete);hideFullBoardOptionsScreen();if(hintsState==="show"){updateHints()}return}function startNewFullBoardGame_Alt(){$("#puzzleTools").fadeOut("fast");exercizeMode=false;flashLoadingBox("Setting up New Board",800);newGameType="fullBoard";Stack.empty();setupNewGame(standardGameTemplete);hideEndGameScreen();if(hintsState==="show"){updateHints()}return}function newGameButtonWasClicked(){$("#miniPreviewBoard").fadeOut("fast");newGameType="fullBoard";$("#newFullBoardGameTitle").fadeIn("fast");$("#loadSavedBoardGameButton").fadeIn("fast");$("#createNewBoardGameButton").fadeIn("fast");$("#newFullBoardGameDescDiv").fadeIn("fast");$("#newFullBoardGameButton").fadeOut("fast");$("#loadSavedBoardGameTitle").fadeOut("fast");$("#createNewBoardGameTitle").fadeOut("fast");$("#loadSavedBoardGameDescDiv").fadeOut("fast");$("#customBoardGameDescDiv").fadeOut("fast");$("#miniPreviewBoard").fadeIn("fast");return}function LoadSavedGameButtonWasClicked(){$("#miniPreviewBoard").fadeOut("fast");newGameType="savedBoard";$("#loadSavedBoardGameTitle").fadeIn("fast");$("#newFullBoardGameButton").fadeIn("fast");$("#createNewBoardGameButton").fadeIn("fast");$("#loadSavedBoardGameDescDiv").fadeIn("fast");$("#loadSavedBoardGameButton").fadeOut("fast");$("#newFullBoardGameTitle").fadeOut("fast");$("#createNewBoardGameTitle").fadeOut("fast");$("#customBoardGameDescDiv").fadeOut("fast");$("#newFullBoardGameDescDiv").fadeOut("fast");$("#miniPreviewBoard").fadeIn("fast");return}function createNewBoardGameButtonWasClicked(){$("#miniPreviewBoard").fadeOut("fast");newGameType="customBoard";$("#createNewBoardGameTitle").fadeIn("fast");$("#newFullBoardGameButton").fadeIn("fast");$("#loadSavedBoardGameButton").fadeIn("fast");$("#customBoardGameDescDiv").fadeIn("fast");$("#createNewBoardGameButton").fadeOut("fast");$("#newFullBoardGameTitle").fadeOut("fast");$("#loadSavedBoardGameTitle").fadeOut("fast");$("#loadSavedBoardGameDescDiv").fadeOut("fast");$("#newFullBoardGameDescDiv").fadeOut("fast");$("#miniPreviewBoard").fadeIn("fast");return}function flashMessage(a,b){messageText.textContent=a;showMessageTextDiv();setTimeout("hideMessageTextDiv()",b);return}function changeMarbleColor(){var b;theColor=marbleColor;var c="marble"+theColor;var e="marble"+theColor+"selected";var a="url(Images/"+c+".png)";var d="url(Images/"+e+".png)";localStorage.removeItem("marbleColor");localStorage.setItem("marbleColor",marbleColor);$(".aMarble").css("background-image",a);$(".theMovingMarble").css("background-image",d);if(theColor==="Gold"){b="rgba(255,223,0"}if(theColor==="Silver"){b="rgba(185,225,213"}if(theColor==="Sepia"){b="rgba(249,160,27"}if(theColor==="Blue"){b="rgba(0,98,158"}if(theColor==="Red"){b="rgba(240,76,62"}if(theColor==="Green"){b="rgba(190,215,48"}b=b+",1)";getElementStyleObject("colorsWrapper").borderColor=b;getElementStyleObject("backgroundWrapper").borderColor=b;getElementStyleObject("soundSettingsWrapper").borderColor=b;getElementStyleObject("gameSettingsWrapper").borderColor=b;getElementStyleObject("puzzleLibraryBodyWrapper").borderColor=b;getElementStyleObject("puzzlesWrapperN").borderColor=b;return}function changeBackground(){localStorage.removeItem("bgImageID");localStorage.setItem("bgImageID",bgImageID);var b=parseInt(bgImageID);for(var a=1;a<=noofBgs;a++){if(a<b){goLeft("bg"+a.toString())}if(a==b){goCenter("bg"+a.toString())}if(a>b){goRight("bg"+a.toString())}}return}function removeElementFromPreviewBoardSet(a){var b=0;for(i=0;i<currentPreviewGame.length;i++){if(currentPreviewGame[i]===a){b=i;break}}currentPreviewGame.remove(b);return}function removeElementFromBoardSet(a){var b=0;for(i=0;i<currentGame.length;i++){if(currentGame[i]===a){b=i;break}}currentGame.remove(b);return}function removeMarbleFromBoard(a){document.getElementById("marble"+a).style.opacity="0.01";document.getElementById("movingMarble"+a).style.opacity="0.01";currentGame[currentGame.length]=a;updateValidMovesDict();return}function removeMarbleFromBoard_x(a){document.getElementById("marble"+a).style.opacity="0.01";document.getElementById("movingMarble"+a).style.opacity="0.01";return}function removeMarbleFromBoard_xAux(a){}function removeMarbleFromBoardAux(a){return}function removeMarbleFromBoard_Middle(a){var b=300;$("#marble"+a).hide(b);setTimeout("removeMarbleFromBoard_MiddleAux("+a+")",b);currentGame[currentGame.length]=a;return}function removeMarbleFromBoard_MiddleAux(a){$("#marble"+a).show();document.getElementById("marble"+a).style.opacity="0.01";document.getElementById("movingMarble"+a).style.opacity="0.01";return}function removeMarbleFromPreviewBoard(a){document.getElementById("Aux_marble"+a).style.opacity="0.01";document.getElementById("Aux_movingMarble"+a).style.opacity="0.01";currentPreviewGame[currentPreviewGame.length]=a;return}function removeMarbleFromEndBoard(a){document.getElementById("End_marble"+a).style.opacity="0.01";document.getElementById("End_movingMarble"+a).style.opacity="0.01";return}function addMarbleToPreviewBoard(a){document.getElementById("Aux_marble"+a).style.opacity="1";removeElementFromPreviewBoardSet(a);return}function addMarbleToBoard(a){document.getElementById("marble"+a).style.opacity="1";removeElementFromBoardSet(a);return}function updateNextMovePegs(){}function marbleWasTouched(c){if(noOfTouchesOnScreen>1){return}var b=c.target.id;currentlyDraggedMarble=b;var d="marble"+b.substring(12);var g="marbleWrapper"+b.substring(12);if(isNOTaMemberof(b.substring(12),currentGame)){playSound("lift");document.getElementById(b).style.opacity="1";document.getElementById(d).style.opacity="0";if(targetPegState==="show"){var f=validMovesDict[b.substring(12)];for(var a=0;a<f.length;a++){$("#peg"+f[a]).addClass("validPegClass")}}}return}function putTheMarbleBackCOS(a){var f=250;var e="movingMarble"+a;var g="marble"+ +a;if(isAMemberof(a,currentGame)){$("#"+e).animate({left:0,top:0},0);document.getElementById("marble"+a).style.opacity="0.01";document.getElementById("movingMarble"+a).style.opacity="0.01"}else{$("#"+e).animate({left:[0,"easeInCirc"],top:[0,"easeOutCirc"]},f);var c=getOffset(getElementObject("marble"+a));var b=parseInt(c.left*100/zoomPercent);var d=parseInt(c.top*100/zoomPercent);$("movingMarblezIndex").animate({left:[b,"easeInCirc"],top:[d,"easeOutCirc"]},f);setTimeout('putTheMarbleBack_aux("'+a+'")',f+50)}return}function putTheMarbleBack(a){var c=250;var b="movingMarble"+a;var d="marble"+ +a;if(isAMemberof(a,currentGame)){$("#"+b).animate({left:0,top:0},0);document.getElementById("marble"+a).style.opacity="0.01";document.getElementById("movingMarble"+a).style.opacity="0.01"}else{$("#"+b).animate({left:[0,"easeInCirc"],top:[0,"easeOutCirc"]},c);setTimeout('putTheMarbleBack_aux("'+a+'")',c+50)}return}function marbleWasReleased(b){$(".boardTableTD").removeClass("validPegClass");var a=b.target.id.substring(12);if(isNOTaMemberof(a,currentGame)){setTimeout("playSound('fallback')",250)}putTheMarbleBack(a);return}function putTheMarbleBack_aux(a){getElementStyleObject("marble"+a).opacity="1";getElementStyleObject("movingMarble"+a).opacity="0.01";getElementStyleObject("movingMarblezIndex").opacity="0";getElementStyleObject("movingMarblezIndex").top="-100px";getElementStyleObject("movingMarblezIndex").left="-100px"}function isNOTaMemberof(b,a){for(i=0;i<a.length;i++){if(a[i]===b){return false}}return true}function isAMemberof(b,a){for(i=0;i<a.length;i++){if(a[i]===b){return true}}return false}function isMoveValid(f,e,b,a){var d=f.toString()+e.toString();var c=b.toString()+a.toString();if(isNOTaMemberof(d,theBoardSlots)){return false}if(isNOTaMemberof(c,theBoardSlots)){return false}if(isAMemberof(d,currentGame)){return false}if(isNOTaMemberof(c,currentGame)){return false}if((Math.abs(f-b)==2&&e==a)||(Math.abs(e-a)==2&&f==b)){if(isNOTaMemberof(getAvgOfCoods(f,e,b,a),currentGame)){return true}else{return false}}else{return false}}function getAvgOfCoods(e,d,b,a){var c="";if(e==b){c=e.toString();if(a>d){c=c+(d+1).toString()}else{c=c+(a+1).toString()}}else{if(b>e){c=(e+1).toString()}else{c=(b+1).toString()}c=c+d.toString()}return c}function isOdd(a){if(a%2==0){return false}else{return true}}function isEven(a){if(a%2==1){return false}else{return true}}function isRight(a){if(a>3){return true}else{return false}}function isTop(a){if(a>3){return false}else{return true}}function animateAwayMarbleCOS(b){var a=parseInt(b[0]);var f=parseInt(b[1]);var d=getOffset(getElementObject("marble"+b));var c=parseInt(d.left);var e=parseInt(d.top);console.log(c+", "+e);if(isTop(a)&&isRight(f)){$("#movingMarblezIndexA").stop().animate({top:e.toString()+"px",left:c.toString()+"px",opacity:"1"},0).animate({top:["-350px","easeOutCirc"],left:["350px","easeInCirc"]},700).animate({top:"-100px",left:"-100px",opacity:"0"},0);return}if(isTop(a)&&!isRight(f)){$("#movingMarblezIndexA").stop().animate({top:e.toString()+"px",left:c.toString()+"px",opacity:"1"},0).animate({top:["-350px","easeOutCirc"],left:["-350px","easeInCirc"]},700).animate({top:"-100px",left:"-100px",opacity:"0"},0);return}if(!isTop(a)&&isRight(f)){$("#movingMarblezIndexA").stop().animate({top:e.toString()+"px",left:c.toString()+"px",opacity:"1"},0).animate({top:["350px","easeOutCirc"],left:["350px","easeInCirc"]},700).animate({top:"-100px",left:"-100px",opacity:"0"},0);return}if(!isTop(a)&&!isRight(f)){$("#movingMarblezIndexA").stop().animate({top:e.toString()+"px",left:c.toString()+"px",opacity:"1"},0).animate({top:["350px","easeOutCirc"],left:["-350px","easeInCirc"]},700).animate({top:"-100px",left:"-100px",opacity:"0"},0);return}}function animateAwayMarble(b){var a=parseInt(b[0]);var c=parseInt(b[1]);if(isTop(a)&&isRight(c)){$("#movingMarble"+b).animate({top:"0px",left:"0px"},0).animate({top:["-350px","easeOutCirc"],left:["350px","easeInCirc"]},500).animate({top:"0px",left:"0px"},0);return}if(isTop(a)&&!isRight(c)){$("#movingMarble"+b).animate({top:"0px",left:"0px"},0).animate({top:["-350px","easeOutCirc"],left:["-350px","easeInCirc"]},500).animate({top:"0px",left:"0px"},0);return}if(!isTop(a)&&isRight(c)){$("#movingMarble"+b).animate({top:"0px",left:"0px"},0).animate({top:["350px","easeOutCirc"],left:["350px","easeInCirc"]},500).animate({top:"0px",left:"0px"},0);return}if(!isTop(a)&&!isRight(c)){$("#movingMarble"+b).animate({top:"0px",left:"0px"},0).animate({top:["350px","easeOutCirc"],left:["-350px","easeInCirc"]},500).animate({top:"0px",left:"0px"},0);return}}function updateValidMovesDict(){for(var b=0;b<theBoardSlots.length;b++){validMovesDict[theBoardSlots[b]]=getAllValidMoves(theBoardSlots[b])}return}function updateHints(){$(".boardTableTD").removeClass("nextMovePegClass");for(var b=0;b<theBoardSlots.length;b++){if(hintsState==="show"){if(validMovesDict[theBoardSlots[b]].length>0){$("#peg"+theBoardSlots[b]).addClass("nextMovePegClass")}}}return}function isGameOver(){for(var b=0;b<theBoardSlots.length;b++){if((validMovesDict[theBoardSlots[b]]).length>0){return false}}return true}function marbleWasDropped(g,d){var b=g.target.id;var f=b.substring(12);var a=d.substring(3);sourceX=parseInt(f[0]);sourceY=parseInt(f[1]);destX=parseInt(a[0]);destY=parseInt(a[1]);if(isMoveValid(sourceX,sourceY,destX,destY)){$("#"+d).removeClass("validPegClass");playSound("drop");addMarbleToBoard(a);removeMarbleFromBoard(f);var c=getAvgOfCoods(sourceX,sourceY,destX,destY);setTimeout('setInterimOpacity("'+c+'")',250);setTimeout('animateAwayMarble("'+c+'")',400);currentGame[currentGame.length]=c;updateValidMovesDict();updateHints();setTimeout('removeMarbleFromBoard_x("'+c+'"); ',700);setTimeout('document.getElementById("marble'+a+'").style.opacity = "1"; ',300);if(isGameOver()){setTimeout("goToEndGameScreen();",200)}Stack.push(makeArrayCopy(currentGame))}else{document.getElementById("movingMarble"+f).style.opacity=".01";document.getElementById("marble"+f).style.opacity="1"}putTheMarbleBack(f);return}function setInterimOpacity(a){document.getElementById("marble"+a).style.opacity="0.01";document.getElementById("movingMarble"+a).style.opacity="1"}function setupNewGame(d){oneMoreGamePlayed();manageTrial();currentGame=[];var a;for(var b=0;b<theBoardSlots.length;b++){a=theBoardSlots[b];document.getElementById("marble"+a).style.opacity="1";document.getElementById("movingMarble"+a).style.opacity="0.01"}for(var c=0;c<d.length;c++){removeMarbleFromBoard(d[c])}Stack.push(d);updateValidMovesDict();if(hintsState==="show"){updateHints()}return}function undoMove(){playSound("tink");if(Stack.size()<=1){flashMessage("No Moves to Undo",2000);return}flashMessage("Move Undone",1000);Stack.pop();var a=Stack.pop();setupNewGame(a);updateHints();return}function undoFinalMove(){playSound("tink");hideEndGameScreen();flashMessage("Last Move Undone",1000);Stack.pop();var a=Stack.pop();setupNewGame(a);updateHints();return}function startNewBoard(){hideEndGameScreen();flashMessage("New Board Ready",1000);setupNewGame(standardGameTemplete);updateHints()}function resetBoard(){playSound("tink");$("#startGameOverButton").addClass("headerButtonActive");setTimeout("$('#startGameOverButton').removeClass('headerButtonActive');",500);oneMoreGamePlayed();manageTrial();flashMessage("Board Reset",700);var a;while(Stack.size()>0){a=Stack.pop()}setupNewGame(a);updateHints();return}function setupFullBoardPreviewGame(){setupNewPreviewGame(fullGame)}function setupEmptyBoardPreviewGame(){setupNewPreviewGame(emptyGame)}function setupNewPreviewGame(d){playSound("tink");currentPreviewGame=[];var a;for(var b=0;b<theBoardSlots.length;b++){a=theBoardSlots[b];document.getElementById("Aux_marble"+a).style.opacity="1";document.getElementById("Aux_movingMarble"+a).style.opacity="0.01"}for(var c=0;c<d.length;c++){removeMarbleFromPreviewBoard(d[c])}return}function setupEndGameBoard(){var a;for(var b=0;b<theBoardSlots.length;b++){a=theBoardSlots[b];document.getElementById("End_marble"+a).style.opacity="1";document.getElementById("End_movingMarble"+a).style.opacity="0.01"}for(var c=0;c<currentGame.length;c++){removeMarbleFromEndBoard(currentGame[c])}return}function marbleIsOver(f,c){var b=f.target.id;var d=b.substring(12);var a=c.substring(3);sourceX=parseInt(d[0]);sourceY=parseInt(d[1]);destX=parseInt(a[0]);destY=parseInt(a[1]);if(isMoveValid(sourceX,sourceY,destX,destY)){$("#"+c).addClass("validPegClass")}}function marbleIsOut(f,c){var b=f.target.id;var d=b.substring(12);var a=c.substring(3);sourceX=parseInt(d[0]);sourceY=parseInt(d[1]);destX=parseInt(a[0]);destY=parseInt(a[1]);if(isMoveValid(sourceX,sourceY,destX,destY)){$("#"+c).removeClass("validPegClass")}}function startUpAnime(){setTimeout('$("#foxy").animate({"opacity":"1", "z-index": "10003"}, 500); $("#ninja").animate({"opacity":".2", "z-index": "10002"}, 500); $("#studios").animate({"opacity":".2", "z-index": "10001"}, 500); ',0);setTimeout('$("#foxy").animate({"opacity":".2", "z-index": "10001"}, 500); $("#ninja").animate({"opacity":"1", "z-index": "10003"}, 500); $("#studios").animate({"opacity":".2", "z-index": "10002"}, 500); ',1000);setTimeout('$("#foxy").animate({"opacity":".2", "z-index": "10001"}, 500); $("#ninja").animate({"opacity":".2", "z-index": "10002"}, 500); $("#studios").animate({"opacity":"1", "z-index": "10003"}, 500); ',2000);setTimeout('$("#foxy").animate({"opacity":"1", "z-index": "10002"}, 500); $("#ninja").animate({"opacity":"1", "z-index": "10001"}, 500); $("#studios").animate({"opacity":"1", "z-index": "10003"}, 500); ',3000);return}function startUp(){setTimeout('document.getElementById("startUpScreen").style.display = "none";',1200);if(!lite){getElementStyleObject("goToUpgrade").display="none"}if(touchSupport){boardListiScroll=new iScroll(document.getElementById("boardLibraryBody"))}changeBackground();changeMarbleColor();contentPos=getOffset(getElementObject("content"));document.getElementById("opacityBar").style.width=backgroundOpacityBarLength.toString()+"px";flashLoadingBox("",100);document.getElementById("theBoard").style.display="block";if(isMusicOn==="true"){bgMusicObj.play({numberOfLoops:10000})}if(touchSupport){for(var b=0;b<33;b++){new webkit_draggable("movingMarble"+theBoardSlots[b]);addTapElement("Aux_movingMarble"+theBoardSlots[b],auxMarbleWasClicked)}webkit_drop.add("peg13",{onOver:function(){marbleIsOver(event,"peg13")},onOut:function(){marbleIsOut(event,"peg13")},onDrop:function(){marbleWasDropped(event,"peg13")}});webkit_drop.add("peg14",{onDrop:function(){marbleWasDropped(event,"peg14")}});webkit_drop.add("peg15",{onDrop:function(){marbleWasDropped(event,"peg15")}});webkit_drop.add("peg23",{onDrop:function(){marbleWasDropped(event,"peg23")}});webkit_drop.add("peg24",{onDrop:function(){marbleWasDropped(event,"peg24")}});webkit_drop.add("peg25",{onDrop:function(){marbleWasDropped(event,"peg25")}});webkit_drop.add("peg31",{onDrop:function(){marbleWasDropped(event,"peg31")}});webkit_drop.add("peg32",{onDrop:function(){marbleWasDropped(event,"peg32")}});webkit_drop.add("peg33",{onDrop:function(){marbleWasDropped(event,"peg33")}});webkit_drop.add("peg33",{onDrop:function(){marbleWasDropped(event,"peg33")}});webkit_drop.add("peg34",{onDrop:function(){marbleWasDropped(event,"peg34")}});webkit_drop.add("peg35",{onDrop:function(){marbleWasDropped(event,"peg35")}});webkit_drop.add("peg34",{onDrop:function(){marbleWasDropped(event,"peg34")}});webkit_drop.add("peg36",{onDrop:function(){marbleWasDropped(event,"peg36")}});webkit_drop.add("peg37",{onDrop:function(){marbleWasDropped(event,"peg37")}});webkit_drop.add("peg41",{onDrop:function(){marbleWasDropped(event,"peg41")}});webkit_drop.add("peg42",{onDrop:function(){marbleWasDropped(event,"peg42")}});webkit_drop.add("peg43",{onDrop:function(){marbleWasDropped(event,"peg43")}});webkit_drop.add("peg44",{onDrop:function(){marbleWasDropped(event,"peg44")}});webkit_drop.add("peg43",{onDrop:function(){marbleWasDropped(event,"peg43")}});webkit_drop.add("peg44",{onDrop:function(){marbleWasDropped(event,"peg44")}});webkit_drop.add("peg45",{onDrop:function(){marbleWasDropped(event,"peg45")}});webkit_drop.add("peg46",{onDrop:function(){marbleWasDropped(event,"peg46")}});webkit_drop.add("peg47",{onDrop:function(){marbleWasDropped(event,"peg47")}});webkit_drop.add("peg51",{onDrop:function(){marbleWasDropped(event,"peg51")}});webkit_drop.add("peg52",{onDrop:function(){marbleWasDropped(event,"peg52")}});webkit_drop.add("peg53",{onDrop:function(){marbleWasDropped(event,"peg53")}});webkit_drop.add("peg54",{onDrop:function(){marbleWasDropped(event,"peg54")}});webkit_drop.add("peg53",{onDrop:function(){marbleWasDropped(event,"peg53")}});webkit_drop.add("peg54",{onDrop:function(){marbleWasDropped(event,"peg54")}});webkit_drop.add("peg55",{onDrop:function(){marbleWasDropped(event,"peg55")}});webkit_drop.add("peg56",{onDrop:function(){marbleWasDropped(event,"peg56")}});webkit_drop.add("peg57",{onDrop:function(){marbleWasDropped(event,"peg57")}});webkit_drop.add("peg63",{onDrop:function(){marbleWasDropped(event,"peg63")}});webkit_drop.add("peg64",{onDrop:function(){marbleWasDropped(event,"peg64")}});webkit_drop.add("peg65",{onDrop:function(){marbleWasDropped(event,"peg65")}});webkit_drop.add("peg73",{onDrop:function(){marbleWasDropped(event,"peg73")}});webkit_drop.add("peg74",{onDrop:function(){marbleWasDropped(event,"peg74")}});webkit_drop.add("peg75",{onDrop:function(){marbleWasDropped(event,"peg75")}})}else{$("#movingMarble13").draggable({start:function(){marbleWasTouchedCOS("13")},drag:function(){marbleIsDraggedCOS(event,"13")},stop:function(){marbleWasReleasedCOS("13")}});$("#movingMarble14").draggable({start:function(){marbleWasTouchedCOS("14")},drag:function(){marbleIsDraggedCOS(event,"14")},stop:function(){marbleWasReleasedCOS("14")}});$("#movingMarble15").draggable({start:function(){marbleWasTouchedCOS("15")},drag:function(){marbleIsDraggedCOS(event,"15")},stop:function(){marbleWasReleasedCOS("15")}});$("#movingMarble23").draggable({start:function(){marbleWasTouchedCOS("23")},drag:function(){marbleIsDraggedCOS(event,"23")},stop:function(){marbleWasReleasedCOS("23")}});$("#movingMarble24").draggable({start:function(){marbleWasTouchedCOS("24")},drag:function(){marbleIsDraggedCOS(event,"24")},stop:function(){marbleWasReleasedCOS("24")}});$("#movingMarble25").draggable({start:function(){marbleWasTouchedCOS("25")},drag:function(){marbleIsDraggedCOS(event,"25")},stop:function(){marbleWasReleasedCOS("25")}});$("#movingMarble31").draggable({start:function(){marbleWasTouchedCOS("31")},drag:function(){marbleIsDraggedCOS(event,"31")},stop:function(){marbleWasReleasedCOS("31")}});$("#movingMarble32").draggable({start:function(){marbleWasTouchedCOS("32")},drag:function(){marbleIsDraggedCOS(event,"32")},stop:function(){marbleWasReleasedCOS("32")}});$("#movingMarble33").draggable({start:function(){marbleWasTouchedCOS("33")},drag:function(){marbleIsDraggedCOS(event,"33")},stop:function(){marbleWasReleasedCOS("33")}});$("#movingMarble34").draggable({start:function(){marbleWasTouchedCOS("34")},drag:function(){marbleIsDraggedCOS(event,"34")},stop:function(){marbleWasReleasedCOS("34")}});$("#movingMarble35").draggable({start:function(){marbleWasTouchedCOS("35")},drag:function(){marbleIsDraggedCOS(event,"35")},stop:function(){marbleWasReleasedCOS("35")}});$("#movingMarble36").draggable({start:function(){marbleWasTouchedCOS("36")},drag:function(){marbleIsDraggedCOS(event,"36")},stop:function(){marbleWasReleasedCOS("36")}});$("#movingMarble37").draggable({start:function(){marbleWasTouchedCOS("37")},drag:function(){marbleIsDraggedCOS(event,"37")},stop:function(){marbleWasReleasedCOS("37")}});$("#movingMarble41").draggable({start:function(){marbleWasTouchedCOS("41")},drag:function(){marbleIsDraggedCOS(event,"41")},stop:function(){marbleWasReleasedCOS("41")}});$("#movingMarble42").draggable({start:function(){marbleWasTouchedCOS("42")},drag:function(){marbleIsDraggedCOS(event,"42")},stop:function(){marbleWasReleasedCOS("42")}});$("#movingMarble43").draggable({start:function(){marbleWasTouchedCOS("43")},drag:function(){marbleIsDraggedCOS(event,"43")},stop:function(){marbleWasReleasedCOS("43")}});$("#movingMarble44").draggable({start:function(){marbleWasTouchedCOS("44")},drag:function(){marbleIsDraggedCOS(event,"44")},stop:function(){marbleWasReleasedCOS("44")}});$("#movingMarble45").draggable({start:function(){marbleWasTouchedCOS("45")},drag:function(){marbleIsDraggedCOS(event,"45")},stop:function(){marbleWasReleasedCOS("45")}});$("#movingMarble46").draggable({start:function(){marbleWasTouchedCOS("46")},drag:function(){marbleIsDraggedCOS(event,"46")},stop:function(){marbleWasReleasedCOS("46")}});$("#movingMarble47").draggable({start:function(){marbleWasTouchedCOS("47")},drag:function(){marbleIsDraggedCOS(event,"47")},stop:function(){marbleWasReleasedCOS("47")}});$("#movingMarble51").draggable({start:function(){marbleWasTouchedCOS("51")},drag:function(){marbleIsDraggedCOS(event,"51")},stop:function(){marbleWasReleasedCOS("51")}});$("#movingMarble52").draggable({start:function(){marbleWasTouchedCOS("52")},drag:function(){marbleIsDraggedCOS(event,"52")},stop:function(){marbleWasReleasedCOS("52")}});$("#movingMarble53").draggable({start:function(){marbleWasTouchedCOS("53")},drag:function(){marbleIsDraggedCOS(event,"53")},stop:function(){marbleWasReleasedCOS("53")}});$("#movingMarble54").draggable({start:function(){marbleWasTouchedCOS("54")},drag:function(){marbleIsDraggedCOS(event,"54")},stop:function(){marbleWasReleasedCOS("54")}});$("#movingMarble55").draggable({start:function(){marbleWasTouchedCOS("55")},drag:function(){marbleIsDraggedCOS(event,"55")},stop:function(){marbleWasReleasedCOS("55")}});$("#movingMarble56").draggable({start:function(){marbleWasTouchedCOS("56")},drag:function(){marbleIsDraggedCOS(event,"56")},stop:function(){marbleWasReleasedCOS("56")}});$("#movingMarble57").draggable({start:function(){marbleWasTouchedCOS("57")},drag:function(){marbleIsDraggedCOS(event,"57")},stop:function(){marbleWasReleasedCOS("57")}});$("#movingMarble63").draggable({start:function(){marbleWasTouchedCOS("63")},drag:function(){marbleIsDraggedCOS(event,"63")},stop:function(){marbleWasReleasedCOS("63")}});$("#movingMarble64").draggable({start:function(){marbleWasTouchedCOS("64")},drag:function(){marbleIsDraggedCOS(event,"64")},stop:function(){marbleWasReleasedCOS("64")}});$("#movingMarble65").draggable({start:function(){marbleWasTouchedCOS("65")},drag:function(){marbleIsDraggedCOS(event,"65")},stop:function(){marbleWasReleasedCOS("65")}});$("#movingMarble73").draggable({start:function(){marbleWasTouchedCOS("73")},drag:function(){marbleIsDraggedCOS(event,"73")},stop:function(){marbleWasReleasedCOS("73")}});$("#movingMarble74").draggable({start:function(){marbleWasTouchedCOS("74")},drag:function(){marbleIsDraggedCOS(event,"74")},stop:function(){marbleWasReleasedCOS("74")}});$("#movingMarble75").draggable({start:function(){marbleWasTouchedCOS("75")},drag:function(){marbleIsDraggedCOS(event,"75")},stop:function(){marbleWasReleasedCOS("75")}});for(var b=0;b<33;b++){$("#peg"+theBoardSlots[b]).droppable({drop:function(c){marbleWasDroppedCOS(c)}})}}Stack.empty();setupNewGame(standardGameTemplete);populateSavedBoardList();populatePuzzleBoardList();$(".saved_board_wrapper_list").removeClass("saved_board_wrapper_list_selected");updateValidMovesDict();if(hintsState==="show"){updateHints()}$("#peg33").addClass("validPegClass");setTimeout('$("#peg33").removeClass("validPegClass");',600);if(chromeOS){document.getElementById("appWrapper").className="appWrapperChrome";$(".mainMenuButton").mouseover(function(){$(this).css("color","rgba(240,76,62,1)")});$(".mainMenuButton").mouseout(function(){$(this).css("color","rgba(0,98,158,1)")});$(".mainBottomButton").mouseover(function(){$(this).css("border-color","rgba(249,160,27,1)")});$(".mainBottomButton").mouseout(function(){$(this).css("border-color","transparent")});$(".helpButton").mouseover(function(){$(this).css("color","rgba(240,76,62,1)")});$(".helpButton").mouseout(function(){$(this).css("color","rgba(0,98,158,1)")});$(".puzzle_wrapper_list").mouseover(function(){$(this).css("border-color","rgba(190,215,48,1)")});$(".puzzle_wrapper_list").mouseout(function(){$(this).css("border-color","transparent")});$(".saved_board_wrapper_list").mouseover(function(){$(this).css("border-color","rgba(190,215,48,1)")});$(".saved_board_wrapper_list").mouseout(function(){$(this).css("border-color","transparent")});$(".headerButton").mouseover(function(){$(this).css("color","rgba(185,225,213,1)");$(this).css("background-image","url('../Images/buttonbgDB.png')")});$(".headerButton").mouseout(function(){$(this).css("color","rgba(0,98,158,1)");$(this).css("background-image","url('../Images/buttonbgLB.png')")})}for(var b=0;b<=6;b++){goRight("pzcat"+b.toString())}var a=1;for(var b=1;b<=6;b++){if(b<a){goLeft("helpSlide"+b.toString())}if(b==a){goCenter("helpSlide"+b.toString())}if(b>a){goRight("helpSlide"+b.toString())}getElementStyleObject("helpSlide"+b.toString()).backgroundImage="url(Images/helpPage"+b.toString()+".png)"}menuButtonWasClicked();setZoom();manageTrial();if(android){menuButtonWasClicked();doneWithAbout();hideEndGameScreen();document.getElementById("puzzleResults").display="none";document.getElementById("theBoard").display="none";document.getElementById("solnScreen").display="none"}}var currentlyDraggedMarble="NONE";function marbleWasTouchedCLICK(c){var b=c.target.id;marbleWasReleasedCLICK(currentlyDraggedMarble);if(isAMemberof(b.substring(12),currentGame)){if(currentlyDraggedMarble!="NONE"){marbleWasDroppedCLICK(currentlyDraggedMarble.substring(12),b.substring(12));return}else{currentlyDraggedMarble="NONE";return}}if(currentlyDraggedMarble==b){currentlyDraggedMarble="NONE";return}currentlyDraggedMarble=b;var d="marble"+b.substring(12);var g="marbleWrapper"+b.substring(12);if(isNOTaMemberof(b.substring(12),currentGame)){playSound("lift");document.getElementById(b).style.opacity="1";$("#"+b).addClass("theSelectedMarble");document.getElementById(d).style.opacity="0";if(targetPegState==="show"){var f=validMovesDict[b.substring(12)];for(var a=0;a<f.length;a++){$("#peg"+f[a]).addClass("validPegClass")}}}return}function marbleWasReleasedCLICK(b){$("#"+b).removeClass("theSelectedMarble");$(".boardTableTD").removeClass("validPegClass");var a=b.substring(12);putTheMarbleBackCLICK(a);return}function putTheMarbleBackCLICK(a){var c=250;var b="movingMarble"+a;var d="marble"+ +a;if(isAMemberof(a,currentGame)){$("#"+b).animate({left:0,top:0},0);document.getElementById("marble"+a).style.opacity="0.01";document.getElementById("movingMarble"+a).style.opacity="0.01"}else{$("#"+b).animate({left:[0,"easeInCirc"],top:[0,"easeOutCirc"]},0);setTimeout('putTheMarbleBack_auxCLICK("'+a+'")',50)}return}function putTheMarbleBack_auxCLICK(a){document.getElementById("marble"+a).style.opacity="1";document.getElementById("movingMarble"+a).style.opacity="0.01"}function marbleWasDroppedCLICK(d,a){sourceX=parseInt(d[0]);sourceY=parseInt(d[1]);destX=parseInt(a[0]);destY=parseInt(a[1]);if(isMoveValid(sourceX,sourceY,destX,destY)){var c="peg"+a;$("#"+c).removeClass("validPegClass");playSound("fallback");document.getElementById("movingMarble"+d).style.opacity=".01";document.getElementById("marble"+d).style.opacity=".01";addMarbleToBoard(a);removeMarbleFromBoard(d);var b=getAvgOfCoods(sourceX,sourceY,destX,destY);setTimeout('setInterimOpacity("'+b+'")',250);setTimeout('animateAwayMarble("'+b+'")',400);currentGame[currentGame.length]=b;updateValidMovesDict();updateHints();setTimeout('removeMarbleFromBoard_x("'+b+'"); ',700);setTimeout('document.getElementById("marble'+a+'").style.opacity = "1"; ',300);if(isGameOver()){setTimeout("goToEndGameScreen();",200)}Stack.push(makeArrayCopy(currentGame));setTimeout("marbDropAux('"+d+"')",200)}else{document.getElementById("movingMarble"+d).style.opacity=".01";document.getElementById("marble"+d).style.opacity="1"}currentlyDraggedMarble="NONE";return}function marbDropAux(a){document.getElementById("movingMarble"+a).style.opacity=".01";document.getElementById("marble"+a).style.opacity=".01"}function playPreviewBoard(){playSound("viewChange");backtoSavedBoards();menuButtonWasClicked();exercizeMode=false;$(".saved_board_wrapper_list").removeClass("saved_board_wrapper_list_selected");Stack.empty();setupNewGame(currentPreviewGame);if(hintsState==="show"){updateHints()}newGameType="";setTimeout('flashMessage("Board Setup", 1400); playButtonWasClicked_Aux()',700);return}function loadGameButtonWasClicked(){document.getElementById("playPreviewBoard").style.display="block";document.getElementById("mainAreaCoverAlt").style.display="block";$("#loadGameButton").addClass("headerButtonActive");$("#savedGamesTabButton").addClass("tabButtonActive");$("#customGamesTabButton").removeClass("tabButtonActive ");$("#puzzleGamesTabButton").removeClass("tabButtonActive ");currentSelectedSavedBoard="1";$("#saved_board_wrapper_list_SB_1").addClass("saved_board_wrapper_list_selected");var b="SB_1";var a=localStorage.getItem(b+"_GAME").splitCSV();Stack.empty();setupNewPreviewGame(a);if(touchstart){boardListiScroll.refresh()}return}function goFullScreen(){isFullScreen=true;document.getElementById("mainAreaWrapper").style.webkitTransform="scale("+fullScreenScaleRatio.toString()+")";ovalShape.style.borderStyle="none";setTimeout("$('#regularScreen').fadeIn('slow');",700);return}function goRegularScreen(){isFullScreen=false;document.getElementById("mainAreaWrapper").style.webkitTransform="scale(1)";ovalShape.style.borderStyle="groove";$("#regularScreen").fadeOut();return}function editBoardButtonWasClicked(){playSound("viewChange");if(lite){flashMessage("upgrade to use this..",2000);return}$("#loadSavedBoardGameWrapper").fadeOut();$("#createNewBoardGameWrapper").fadeIn();$("#miniPreviewBoard").animate({opacity:"1",left:"245px",top:"300px"},400);return}function backtoSavedBoards(){playSound("viewChange");$("#loadSavedBoardGameWrapper").fadeIn();$("#createNewBoardGameWrapper").fadeOut();$("#miniPreviewBoard").animate({opacity:"1",left:"360px",top:"40px"},400);return}function saveTabButtonWasClicked(){$("#savedGamesTabButton").addClass("tabButtonActive");$("#customGamesTabButton").removeClass("tabButtonActive");$("#puzzleGamesTabButton").removeClass("tabButtonActive");document.getElementById("loadSavedBoardGameWrapper").style.display="block";document.getElementById("createNewBoardGameWrapper").style.display="none";document.getElementById("loadPuzzlesGameWrapper").style.display="none";$("#miniPreviewBoard").animate({opacity:"1",left:"360px"},"fast");var a=localStorage.getItem("SB_"+currentSelectedSavedBoard+"_GAME").splitCSV();setupNewPreviewGame(a);return}function puzzleTabButtonWasClicked(){document.getElementById("playPreviewBoard").style.display="none";$("#savedGamesTabButton").removeClass("tabButtonActive");$("#customGamesTabButton").removeClass("tabButtonActive");$("#puzzleGamesTabButton").addClass("tabButtonActive");document.getElementById("loadSavedBoardGameWrapper").style.display="none";document.getElementById("loadPuzzlesGameWrapper").style.display="block";document.getElementById("createNewBoardGameWrapper").style.display="none";document.getElementById("puzzlePreviewDiv").style.display="none";document.getElementById("puzzlesWrapper").style.display="block";document.getElementById("puzzleLibraryBodyWrapper").style.display="block";$("#miniPreviewBoard").animate({opacity:"0"},"fast");return}function goToSettingsScreen(){flashMessage("Some setting need internet connection to work.",5000);document.getElementById("mainAreaCoverAlt").style.display="block";$("#settingsButton").addClass("headerButtonActive");$("#marbleColor"+marbleColor).addClass("currentMarbleClass");$("#background"+bgImageID).addClass("currentBGClass");getElementStyleObject("marbleColor"+marbleColor).borderColor="rgba(240,76,62,1)";getElementStyleObject("background"+bgImageID).borderColor="rgba(240,76,62,1)";return}function goToSettingsScreen_Aux(){$("#marbleColor"+marbleColor).addClass("currentMarbleClass");$("#background"+bgImageID).addClass("currentBGClass");return}function goToAboutScreen(){playSound("viewChange");emailText="I have been playing Marble Hop and I wanted to tell you about it. Learn more at foxyninjastudios.com/marblehop";socialText="I have been playing Marble Hop and I wanted to tell you about it. Learn more at foxyninjastudios.com/marblehop";getElementStyleObject("about").webkitTransform="scale3d(1,1,1)";if(android){getElementStyleObject("about").display="block"}return}function doneWithAbout(){playSound("viewChange");getElementStyleObject("about").webkitTransform="scale3d(0,0,0)";if(android){getElementStyleObject("about").display="none"}return}function goToHowToScreen(){document.getElementById("mainAreaCoverAlt").style.display="block";$("#howToPlayButton").addClass("headerButtonActive");return}function goToEndGameScreen(){playSound("viewChange");hideSolutionScreen();if(exercizeMode){goToPuzzleEndScreen();return}var a=33-currentGame.length;noofMarbles.textContent=a.toString()+" marbles left";if(a==1){noofMarbles.textContent="1 marble left";document.getElementById("starsBox").style.backgroundImage="url(../Images/stars5.png)";emailText="I played Marble Hop and scored 5/5 stars! Learn more at foxyninjastudios.com/marblehop";socialText="I played Marble Hop and scored 5/5 stars! Learn more at foxyninjastudios.com/marblehop"}if(a>=2&&a<4){document.getElementById("starsBox").style.backgroundImage="url(../Images/stars4.png)";emailText="I played Marble Hop and scored 4/5 stars! Learn more at foxyninjastudios.com/marblehop";socialText="I played Marble Hop and scored 4/5 stars! Learn more at foxyninjastudios.com/marblehop"}if(a>=4&&a<7){document.getElementById("starsBox").style.backgroundImage="url(../Images/stars3.png)";emailText="I played Marble Hop and scored 3/5 stars! Learn more at foxyninjastudios.com/marblehop";socialText="I played Marble Hop and scored 3/5 stars! Learn more at foxyninjastudios.com/marblehop"}if(a>=7&&a<10){document.getElementById("starsBox").style.backgroundImage="url(../Images/stars2.png)";emailText="I played Marble Hop and scored 2/5 stars! Learn more at foxyninjastudios.com/marblehop";socialText="I played Marble Hop and scored 2/5 stars! Learn more at foxyninjastudios.com/marblehop"}if(a>10&&a<15){document.getElementById("starsBox").style.backgroundImage="url(../Images/stars1.png)";emailText="I played Marble Hop. Learn more at foxyninjastudios.com/marblehop";socialText="I played Marble Hop. Learn more at foxyninjastudios.com/marblehop"}if(a>=15){document.getElementById("starsBox").style.backgroundImage="url(../Images/stars0.png)";emailText="I played Marble Hop. Learn more at foxyninjastudios.com/marblehop";socialText="I played Marble Hop. Learn more at foxyninjastudios.com/marblehop"}setupEndGameBoard();getElementStyleObject("endGame").webkitTransform="scale3d(1,1,1)";if(android){getElementStyleObject("endGame").display="block"}return}function goToFullBoardOptionsScreen(){document.getElementById("mainAreaCoverAlt").style.display="block";$("#newGameButton").addClass("headerButtonActive");return}function hideFullBoardOptionsScreen(){document.getElementById("mainAreaCoverAlt").style.display="none";$("#newGameButton").removeClass("headerButtonActive");return}function goToSaveBoardOptionsScreen(){$("#saveGameButton").addClass("headerButtonActive");document.getElementById("mainAreaCoverAlt").style.display="block";commentTextArea.value="";var a=33-currentGame.length;noOfMarblesLeftText.textContent=a.toString()+" marbles left";if(a==1){noOfMarblesLeftText.textContent="1 marble left"}savedGameNameText.textContent=(noofSavedGames+1).toString();setTimeout("commentTextArea.focus();",1000);return}function hideSaveBoardOptionsScreen(){commentTextArea.blur();document.getElementById("mainAreaCoverAlt").style.display="none";$("#saveGameButton").removeClass("headerButtonActive");return}function hideAboutScreen(){document.getElementById("mainAreaCoverAlt").style.display="none";$("#aboutButton").removeClass("headerButtonActive");return}function hideHowToScreen(){document.getElementById("mainAreaCoverAlt").style.display="none";$("#howToPlayButton").removeClass("headerButtonActive");return}function hideEndGameScreen(){playSound("tink");getElementStyleObject("endGame").webkitTransform="scale3d(0,0,0)";if(android){getElementStyleObject("endGame").display="none"}return}function hideLoadGameScreen(){document.getElementById("mainAreaCoverAlt").style.display="none";$("#loadGameButton").removeClass("headerButtonActive");$(".saved_board_wrapper_list").removeClass("saved_board_wrapper_list_selected");currentSelectedSavedBoard="1";setTimeout("saveTabButtonWasClicked();",3000);return}function hideSettingsScreen(){document.getElementById("mainAreaCoverAlt").style.display="none";$("#settingsButton").removeClass("headerButtonActive");return}function flashLoadingBox(a,b){loadingText.textContent=a;document.getElementById("loadingBox").style.display="block";setTimeout('document.getElementById("loadingBox").style.display = "none";',b);return}function showMessageTextDiv(){$("#messageBox").fadeIn("fast")}function hideMessageTextDiv(){$("#messageBox").fadeOut("fast")}function boardWasSelectedInLibrary(c){var f=c.target.id;var a=parseInt(f.substring(28));var d=a.toString();if(d===currentSelectedSavedBoard){return}if(a<3){getElementStyleObject("deleteBoard").display="none"}else{getElementStyleObject("deleteBoard").display="block"}$("#saved_board_wrapper_list_SB_"+currentSelectedSavedBoard).removeClass("saved_board_wrapper_list_selected");currentSelectedSavedBoard=d;$("#saved_board_wrapper_list_SB_"+currentSelectedSavedBoard).addClass("saved_board_wrapper_list_selected");var e="SB_"+d;var b=localStorage.getItem(e+"_GAME").splitCSV();SavedBoardDescText.textContent=localStorage.getItem(e+"_NOTE");setupNewPreviewGame(b);document.getElementById("miniPreviewBoard").style.display="block"}function deleteSavedBoard(){playSound("viewChange");flashMessage("board deleted...",1500);$("#saved_board_wrapper_list_SB_"+currentSelectedSavedBoard).fadeOut("fast");var a=currentSelectedSavedBoard;currentSelectedSavedBoard=1;$("#saved_board_wrapper_list_SB_"+currentSelectedSavedBoard).addClass("saved_board_wrapper_list_selected");var c="SB_"+currentSelectedSavedBoard;var b=localStorage.getItem(c+"_GAME").splitCSV();SavedBoardDescText.textContent=localStorage.getItem(c+"_NOTE");setupNewPreviewGame(b);document.getElementById("boardLibraryBodyWrapper").scrollTop=0;getElementStyleObject("deleteBoard").display="none";localStorage.setItem("SB_"+a+"_NOTE","**DEL**");return}function playSavedBoard(){if(lite){tryPaidVersion();return}menuButtonWasClicked();var a=currentSelectedSavedBoard;$("#saved_board_wrapper_list_SB_"+currentSelectedSavedBoard).addClass("saved_board_wrapper_list_selected");var c="SB_"+currentSelectedSavedBoard;var b=localStorage.getItem(c+"_GAME").splitCSV();setupNewGame(b);newGameType="";setTimeout("playButtonWasClicked_Aux()",700);return}function populateSavedBoardList(){for(var a=1;a<=noofSavedGames;a++){addSavedBoardListItem(a)}if(touchSupport){boardListiScroll.refresh()}}function addSavedBoardListItem(a){var c="SB_"+a.toString();if(localStorage.getItem(c+"_NOTE")==="**DEL**"){return}var b=document.createElement("div");b.id="saved_board_wrapper_list_"+c;b.className="saved_board_wrapper_list";b.innerHTML=a.toString();document.getElementById("boardLibraryBody").appendChild(b);addButtonElement("saved_board_wrapper_list_"+c,boardWasSelectedInLibrary)}function populatePuzzleBoardList(){for(var a=0;a<exercisesCategories.length;a++){addPuzzleBoardListItem(a)}if(touchSupport){}}function addPuzzleBoardListItem(b){var a=b.toString();var c=document.createElement("div");c.id="puzzle_wrapper_list_"+a;c.className="puzzle_wrapper_list";c.innerHTML="<b>"+exercisesCategories[b]+"</b>";document.getElementById("puzzleLibraryBody").appendChild(c);addButtonElement("puzzle_wrapper_list_"+a,puzzleCatWasSelectedInLibrary);populatePuzzles(b,noOfPuzzles[b])}function saveTheBoard(){playSound("viewChange");noofSavedGames=noofSavedGames+1;localStorage.setItem("noofSavedGames",noofSavedGames.toString());var a=new Date().toDateString();var c="SB_"+noofSavedGames.toString();var b=33-currentGame.length;localStorage.setItem(c+"_GAME",currentGame);localStorage.setItem(c+"_DATE",a);localStorage.setItem(c+"_MARB",b.toString());localStorage.setItem(c+"_NOTE","");flashMessage("Board Saved!",2000);addSavedBoardListItem(noofSavedGames);if(touchSupport){boardListiScroll.refresh()}return}function saveAndStartFullBoard(){$("#newGameButton").removeClass("headerButtonActive");startNewGameAfterSave=true;goToSaveBoardOptionsScreen();return}function fullScreenAuxBoard(){newGameOptionsRightDiv.style.webkitTransform="translate(-175px, -20px) scale(2.2)";newGameOptionsRightDiv.style.backgroundColor="rgba(20, 20, 20, .7)";$(".fullScreenAuxBoardButtons").fadeIn();return}function exitFullScreenAuxBoard(){newGameOptionsRightDiv.style.webkitTransform="translate(0px, 0px) scale(1)";newGameOptionsRightDiv.style.backgroundColor="transparent";$(".fullScreenAuxBoardButtons").fadeOut();return}function marbleColorWasChanged(){marbleColor=document.marbleColorForm.currentColorSelect.value;changeMarbleColor()}function populateBackgroundOptions(){var a;for(i=0;i<backgroundValues.length;i++){a=document.createElement("OPTION");a.text=backgroundNames[i];a.value=backgroundValues[i];backgroundSelect.options.add(a)}}function getBackgroundID(a){for(i=0;i<backgroundValues.length;i++){if(backgroundValues[i]===a){return i}}}function backgroundOpacityChanged(b){var c=100-parseInt(b);var d=c/100;backgroundImageOpacity=parseFloat(b)/100;var a=d.toString();$("#mainAreaBackCover").css("opacity",a)}function flashShine(a){document.getElementById("mainAreaShineDiv").style.display="block";setTimeout('document.getElementById("mainAreaShineDiv").style.display = "none";',a)}function flashCover(a){document.getElementById("mainAreaCoverAlt").style.display="block";setTimeout('document.getElementById("mainAreaCoverAlt").style.display = "none";',a)}function getStringUptoUS(c){var b="";for(var a=0;a<c.length;a++){if(c[a]==="_"){break}b=b+c[a]}return b}function aPreviewMarbleWasClicked(b){if(lite){oneMoreGamePlayed();if(noofPlayedGames>10){tryPaidVersion();return}}playSound("tink");var a=getStringUptoUS(b.target.id.substring(11));if(a===marbleColor){return}$("#marbleColor"+marbleColor).removeClass("currentMarbleClass");getElementStyleObject("marbleColor"+marbleColor).borderColor="transparent";marbleColor=a;changeMarbleColor();$("#marbleColor"+marbleColor).addClass("currentMarbleClass");getElementStyleObject("marbleColor"+marbleColor).borderColor="rgba(240,76,62,1)";return}function aPreviewBGWasClicked(a){if(lite){oneMoreGamePlayed();if(noofPlayedGames>10){tryPaidVersion();return}}playSound("tink");var b=getStringUptoUS(a.target.id.substring(10));if(b===bgImageID){return}removeClass("background"+bgImageID,"currentBGClass");getElementStyleObject("background"+bgImageID).borderColor="transparent";bgImageID=b;changeBackground();addClass("background"+bgImageID,"currentBGClass");getElementStyleObject("background"+bgImageID).borderColor="rgba(240,76,62,1)"}function emailInfo(b){playSound("viewChange");if(chromeOS){var a="mailto:?subject="+emailSubject+"&body="+emailText;var c=window.open(a,"emailWindow");if(c&&c.open&&!c.closed){c.close()}return}new EmailComposer().showEmailComposer(emailSubject,emailText)}function buyAdFree(){if(chromeOS){window.open("http://foxyninjastudios.com/marblehop");return}PhoneGap.exec("ChildBrowserCommand.showWebPage","http://foxyninjastudios.com/marblehop/buy");return}function fnsLink(){playSound("viewChange");if(chromeOS){window.open("http://foxyninjastudios.com");return}PhoneGap.exec("ChildBrowserCommand.showWebPage","http://foxyninjastudios.com");return}function shareOnFaceBook(){playSound("viewChange");socialText="http://foxyninjastudios.com/marblehop";if(chromeOS){window.open("http://www.facebook.com/sharer.php?u="+socialText);return}PhoneGap.exec("ChildBrowserCommand.showWebPage","http://www.facebook.com/sharer.php?u="+socialText)}function shareOnTwitter(){playSound("viewChange");socialText="http://foxyninjastudios.com/marblehop";if(chromeOS){window.open("http://twitter.com/home?status="+socialText);return}PhoneGap.exec("ChildBrowserCommand.showWebPage","http://twitter.com/home?status="+socialText)}function manageTrial(){}function oneMoreGamePlayed(){noofPlayedGames=noofPlayedGames+1;localStorage.setItem("noofPlayedGames",noofPlayedGames.toString());return}function populatePuzzles(b,a){newPuzzleWrapper=document.createElement("ul");newPuzzleWrapper.id="group_wrapper_"+b.toString();newPuzzleWrapper.className="group_wrapper";document.getElementById("puzcatdiv"+b.toString()).appendChild(newPuzzleWrapper);for(var c=1;c<=a;c++){var d=document.createElement("li");d.id="card_wrapper_grid_"+b.toString()+"_"+c.toString();d.className="card_wrapper_grid";d.innerHTML=c.toString();document.getElementById(newPuzzleWrapper.id).appendChild(d);if(localStorage.getItem("PUZ_PERF_"+b.toString()+"_"+c.toString())==null){localStorage.setItem("PUZ_PERF_"+b.toString()+"_"+c.toString(),"puzzle_locked");$("#"+d.id).addClass("puzzle_locked")}else{$("#"+d.id).addClass(localStorage.getItem("PUZ_PERF_"+b.toString()+"_"+c.toString()))}}for(var c=1;c<=a;c++){addTapElement("card_wrapper_grid_"+b.toString()+"_"+c.toString(),puzzleWasSelected)}}function puzzleCatWasSelectedInLibrary(b){playSound("tink");var d=event.target.id;var a=parseInt(d.substring(20));var c=a.toString();puzCat="pzcat"+c;if(puzCat===currentSelectedPuzzleCat){return}getElementStyleObject("puzzlePreviewDiv").opacity="0";getElementStyleObject("puzInst").opacity="1";if(currentSelectedPuzzleBoard!="none"){getElementStyleObject("card_wrapper_grid_"+currentSelectedPuzzleBoard).borderColor="transparent";currentSelectedPuzzleBoard="none"}if(currentSelectedPuzzleCat!="info"){$("#puzzle_wrapper_list_"+currentSelectedPuzzleCat.substring(5)).removeClass("puzzle_board_wrapper_list_selected");getElementStyleObject("puzzle_wrapper_list_"+currentSelectedPuzzleCat.substring(5)).color="rgba(240,76,62,1)"}goRight(currentSelectedPuzzleCat);currentSelectedPuzzleCat=puzCat;$("#puzzle_wrapper_list_"+puzCat.substring(5)).addClass("puzzle_board_wrapper_list_selected");goCenter(currentSelectedPuzzleCat);getElementStyleObject("puzzle_wrapper_list_"+puzCat.substring(5)).color="rgba(190,215,48,1)"}function getstbedus(b){var a="";for(var c=0;c<b.length;c++){a=a+b[c];if(b[c+1]==="_"&&b[c+2]==="_"){break}}return a}function puzzleWasSelected(a){if(a.target.id.length<18){return}playSound("tink");if(currentSelectedPuzzleBoard!="none"){getElementStyleObject("card_wrapper_grid_"+currentSelectedPuzzleBoard).borderColor="transparent"}getElementStyleObject(a.target.id).borderColor="rgba(249,160,27,1)";puzCat=getstbedus(a.target.id.substring(18));setUpPuzzle(puzCat);return}function setUpPuzzle(a){currentSelectedPuzzleBoard=a;getElementObject("endPuzzleOptionsTitleN").innerHTML=getRoman(parseInt(currentSelectedPuzzleCat.substring(5))+1)+" - "+getstringafterus(a);getElementStyleObject("puzzlePreviewDiv").opacity="1";getElementStyleObject("puzInst").opacity="0";var b=getGameMovesinStringArray(exercisesDict[a+"_MOVES"]);puzzleStart=b[0+parseInt(exercisesDict[a+"_START"])].splitCSV();puzzleEnd=b[b.length-1-parseInt(exercisesDict[a+"_END"])].splitCSV();setupPuzzleEndGameBoard(puzzleEnd);setupPuzzleStartGameBoard(puzzleStart)}function backtoAllPuzzles(){getElementStyleObject("puzzleResults").webkitTransform="scale3d(0,0,0)";if(android){getElementStyleObject("puzzleResults").display="none"}menuButtonWasClicked();exercizeMode=false;setTimeout("puzzlesButtonWasClicked();",700);return}function setupPuzzleSolnBoard(d){var a;for(var b=0;b<theBoardSlots.length;b++){a=theBoardSlots[b];document.getElementById("Soln_marble"+a).style.opacity="1";document.getElementById("Soln_movingMarble"+a).style.opacity="0.01"}for(var c=0;c<d.length;c++){removeMarbleFromSolnBoard(d[c])}return}function setupPuzzleEndGameBoard(d){var a;for(var b=0;b<theBoardSlots.length;b++){a=theBoardSlots[b];document.getElementById("PuzEnd_marble"+a).style.opacity="1";document.getElementById("PuzEnd_movingMarble"+a).style.opacity="0.01";document.getElementById("PuzHint_marble"+a).style.opacity="1";document.getElementById("PuzHint_movingMarble"+a).style.opacity="0.01"}for(var c=0;c<d.length;c++){removeMarbleFromPEndBoard(d[c])}return}function setupPuzzleStartGameBoard(d){var a;for(var b=0;b<theBoardSlots.length;b++){a=theBoardSlots[b];document.getElementById("PuzStart_marble"+a).style.opacity="1";document.getElementById("PuzStart_movingMarble"+a).style.opacity="0.01"}for(var c=0;c<d.length;c++){removeMarbleFromPStartBoard(d[c])}return}function removeMarbleFromPEndBoard(a){document.getElementById("PuzEnd_marble"+a).style.opacity="0.01";document.getElementById("PuzEnd_movingMarble"+a).style.opacity="0.01";document.getElementById("PuzHint_marble"+a).style.opacity="0.01";document.getElementById("PuzHint_movingMarble"+a).style.opacity="0.01";return}function removeMarbleFromSolnBoard(a){document.getElementById("Soln_marble"+a).style.opacity="0.01";document.getElementById("Soln_movingMarble"+a).style.opacity="0.01";return}function removeMarbleFromPStartBoard(a){document.getElementById("PuzStart_marble"+a).style.opacity="0.01";document.getElementById("PuzStart_movingMarble"+a).style.opacity="0.01";return}function getGameMovesinStringArray(c){var b=[];var a="";for(i=0;i<c.length;i++){if(c[i]==="|"){b[b.length]=a;a="";continue}a=a+c[i]}return b}function quickStartHowTo(){doneWithQuickStart();goToHowToScreen();return}function quickStartPuzzles(){doneWithQuickStart();loadGameButtonWasClicked();puzzleTabButtonWasClicked();return}function tryPaidVersion(){$("#fullVersionInfoScreen").fadeIn("slow");getElementStyleObject("app6").backgroundImage="url(Images/icon.png)"}function backtoLite(){$("#fullVersionInfoScreen").fadeOut("slow")}function solvePuzzle(){playSound("viewChange");if(currentSelectedPuzzleBoard==="none"){flashMessage("Please select a Puzzle...",1500);return}if(localStorage.getItem("PUZ_PERF_"+puzCat)=="puzzle_locked"){flashMessage("Puzzle locked!",1500);return}menuButtonWasClicked();exercizeMode=true;setTimeout('getElementStyleObject("puzzleTools").display = "block"',2000);Stack.empty();setupNewGame(puzzleStart);if(hintsState==="show"){updateHints()}setTimeout("startTimer()",2000);newGameType="";setTimeout('playButtonWasClicked_Aux(); flashMessage("Puzzle setup...", 1200);',700);return}function goToPuzzleEndScreen(){if(isPuzzleSolved()){puzzleSolved()}else{puzzleFailed()}getElementStyleObject("puzzleTools").display="none";getElementStyleObject("puzzleResults").webkitTransform="scale3d(1,1,1)";if(android){getElementStyleObject("puzzleResults").display="block"}setTimeout("stopTimer();",500);return}function showPuzzleEndBoard(){$("#puzzleHint").show();document.getElementById("puzzleHintOffButton").style.display="none";document.getElementById("puzzleHintOnButton").style.display="block";$("#theBoard").addClass("currentPuzState")}function resumePuzzle(){$("#puzzleHint").hide();document.getElementById("puzzleHintOffButton").style.display="block";document.getElementById("puzzleHintOnButton").style.display="none";$("#theBoard").removeClass("currentPuzState")}function isPuzzleSolved(){if(currentGame.sort().toString()===puzzleEnd.sort().toString()){return true}return false}function puzzleSolved(){var e=localStorage.getItem("PUZ_PERF_"+currentSelectedPuzzleBoard);var b;var d=getElementObject("timerText").innerHTML;getElementObject("puzzleResultTextN").innerHTML=d;$("#flairBox").removeClass("flair_excellent");$("#flairBox").removeClass("flair_good");$("#flairBox").removeClass("flair_verygood");$("#flairBox").removeClass("flair_failed");$("#flairBox").removeClass("flair_timeout");getElementStyleObject("nextPuzzleN").display="block";getElementStyleObject("playPuzzleAgainN").marginLeft="0px";localStorage.removeItem("PUZ_PERF_"+currentSelectedPuzzleBoard);if(d[0]==="0"){$("#flairBox").addClass("flair_good");localStorage.setItem("PUZ_PERF_"+currentSelectedPuzzleBoard,"puzzle_good");b="puzzle_good"}if(d[0]==="1"){$("#flairBox").addClass("flair_verygood");localStorage.setItem("PUZ_PERF_"+currentSelectedPuzzleBoard,"puzzle_verygood");b="puzzle_verygood"}if(d[0]==="2"){$("#flairBox").addClass("flair_excellent");localStorage.setItem("PUZ_PERF_"+currentSelectedPuzzleBoard,"puzzle_excellent");b="puzzle_excellent"}var a=getnextPuzzle();var c=localStorage.getItem("PUZ_PERF_"+a);if(c=="puzzle_locked"){localStorage.setItem("PUZ_PERF_"+a,"puzzle_unplayed");$("#card_wrapper_grid_"+a).removeClass("puzzle_locked");$("#card_wrapper_grid_"+a).addClass("puzzle_unplayed")}if(isItAnImprovement(e,b)){$("#card_wrapper_grid_"+currentSelectedPuzzleBoard).removeClass(e);$("#card_wrapper_grid_"+currentSelectedPuzzleBoard).addClass(b)}}function goToNextPuzzle(){var a=currentSelectedPuzzleBoard;currentSelectedPuzzleBoard=getnextPuzzle();if(getstringbeforeus(a)===getstringbeforeus(currentSelectedPuzzleBoard)){solveAgain();return}currentSelectedPuzzleCat="pzcat"+(parseInt(currentSelectedPuzzleCat.substring(5))+1).toString();solveAgain();return}function getnextPuzzle(){if(currentSelectedPuzzleBoard==="0_1"){return"1_1"}if(currentSelectedPuzzleBoard==="1_12"){return"2_1"}if(currentSelectedPuzzleBoard==="2_12"){return"3_1"}if(currentSelectedPuzzleBoard==="3_12"){return"4_1"}if(currentSelectedPuzzleBoard==="4_12"){return"5_1"}if(currentSelectedPuzzleBoard==="5_12"){return"6_1"}if(currentSelectedPuzzleBoard==="6_12"){return"END"}var a=getstringbeforeus(currentSelectedPuzzleBoard);var b=getstringafterus(currentSelectedPuzzleBoard);return a+"_"+(parseInt(b)+1).toString()}function puzzleFailed(){$("#flairBox").removeClass("flair_excellent");$("#flairBox").removeClass("flair_good");$("#flairBox").removeClass("flair_verygood");$("#flairBox").removeClass("flair_failed");$("#flairBox").removeClass("flair_timeout");$("#flairBox").addClass("flair_failed");getElementStyleObject("nextPuzzleN").display="none";getElementStyleObject("playPuzzleAgainN").marginLeft="140px"}function puzzleFailed_1(){hideSolutionScreen();$("#flairBox").removeClass("flair_excellent");$("#flairBox").removeClass("flair_good");$("#flairBox").removeClass("flair_verygood");$("#flairBox").removeClass("flair_failed");$("#flairBox").removeClass("flair_timeout");$("#flairBox").addClass("flair_timeout");getElementStyleObject("puzzleTools").display="none";getElementStyleObject("puzzleResults").webkitTransform="scale3d(1,1,1)";if(android){getElementStyleObject("puzzleResults").display="block"}setTimeout("stopTimer();",2000);getElementStyleObject("nextPuzzleN").display="none";getElementStyleObject("playPuzzleAgainN").marginLeft="140px"}function solveAgain(){getElementStyleObject("puzzleResults").webkitTransform="scale3d(0,0,0)";if(android){getElementStyleObject("puzzleResults").display="none"}setUpPuzzle(currentSelectedPuzzleBoard);solvePuzzle()}function showAllPuzzles(){$("#puzzleResults").fadeOut(2000);loadGameButtonWasClicked();puzzleTabButtonWasClicked()}function isItAnImprovement(b,d){var c=getNoforP(b);var a=getNoforP(d);if(a>c){return true}return false}function getNoforP(a){if(a==="puzzle_locked"){return 0}if(a==="puzzle_unplayed"){return 1}if(a==="puzzle_good"){return 2}if(a==="puzzle_verygood"){return 3}if(a==="puzzle_excellent"){return 4}return -1}function playButtonWasClicked(){newGameType="fullBoard";playButtonWasClicked_Aux();return}function playButtonWasClicked_Aux(){playSound("viewChange");getElementStyleObject("mainMenuScreenWrapper").webkitTransform="translate3d(-778px,0,0)";getElementStyleObject("theBoard").webkitTransform="scale3d(1,1,1)";if(android){getElementStyleObject("theBoard").display="block";getElementStyleObject("headerDiv").top="0px"}getElementStyleObject("headerDiv").webkitTransform="translate3d(0,0px,0)";if(newGameType==="fullBoard"){setupNewGame(standardGameTemplete);return}}function menuButtonWasClicked(){playSound("viewChange");hideMessageTextDiv();stopTimer();exercizeMode=false;getElementStyleObject("puzzleTools").display="none";getElementStyleObject("mainMenuScreenWrapper").webkitTransform="translate3d(0px,0,0)";getElementStyleObject("mainMenuScreen").webkitTransform="translate3d(0px,0,0)";getElementStyleObject("puzzleScreen").webkitTransform="translate3d(0,0px,0)";getElementStyleObject("settingScreen").webkitTransform="translate3d(0px,0,0)";getElementStyleObject("loadGameScreen").webkitTransform="translate3d(0px,0,0)";getElementStyleObject("howToPlay").webkitTransform="translate3d(0px,0,0)";getElementStyleObject("theBoard").webkitTransform="scale3d(0,0,0)";if(android){getElementStyleObject("theBoard").display="none"}getElementStyleObject("headerDiv").webkitTransform="translate3d(0,-70px,0)";getElementStyleObject("helpWrapper").display="none"}function settingsButtonWasClicked(){playSound("viewChange");getElementStyleObject("mainMenuScreen").webkitTransform="translate3d(-768px,0,0)";getElementStyleObject("settingScreen").webkitTransform="translate3d(-768px,0,0)";$("#marbleColor"+marbleColor).addClass("currentMarbleClass");$("#background"+bgImageID).addClass("currentBGClass");return}function puzzlesButtonWasClicked(){playSound("viewChange");getElementStyleObject("mainMenuScreen").webkitTransform="translate3d(0,-1024px,0)";getElementStyleObject("puzzleScreen").webkitTransform="translate3d(0,-1024px,0)";return}function helpButtonWasClicked(){playSound("viewChange");setTimeout('getElementStyleObject("helpWrapper").display = "block"',500);getElementStyleObject("mainMenuScreen").webkitTransform="translate3d(768px,0,0)";getElementStyleObject("howToPlay").webkitTransform="translate3d(768px,0,0)";for(var a=1;a<=6;a++){getElementStyleObject("helpSlide"+a.toString()).backgroundImage="url(Images/helpPage"+a.toString()+".png)"}return}function doneWithHelp(){getElementStyleObject("mainMenuScreen").webkitTransform="translate3d(0px,0,0)";getElementStyleObject("howToPlay").webkitTransform="translate3d(0px,0,0)";return}function savedBoardButtonWasClicked(){playSound("viewChange");backtoSavedBoards();getElementStyleObject("mainMenuScreen").webkitTransform="translate3d(0,1024px,0)";getElementStyleObject("loadGameScreen").webkitTransform="translate3d(0,1024px,0)";$("#saved_board_wrapper_list_SB_"+currentSelectedSavedBoard).removeClass("saved_board_wrapper_list_selected");currentSelectedSavedBoard=1;$("#saved_board_wrapper_list_SB_"+currentSelectedSavedBoard).addClass("saved_board_wrapper_list_selected");var b="SB_"+currentSelectedSavedBoard;var a=localStorage.getItem(b+"_GAME").splitCSV();setupNewPreviewGame(a);getElementStyleObject("deleteBoard").display="none";document.getElementById("boardLibraryBodyWrapper").scrollTop=0;return}function marbleWasTouchedCOS(g){if(isAMemberof(a,currentGame)){return}getElementStyleObject("body").cursor="-webkit-grabbing";getElementStyleObject("appWrapper").cursor="-webkit-grabbing";var a=g;var c="movingMarble"+a;currentlyDraggedMarble=c;var d="marble"+a;var f="marbleWrapper"+a;if(isNOTaMemberof(a,currentGame)){playSound("lift");document.getElementById(d).style.opacity="0";if(targetPegState==="show"){var e=validMovesDict[a];for(var b=0;b<e.length;b++){$("#peg"+e[b]).addClass("validPegClass")}}}marbleIsDraggedCOS(event,a);return}function marbleWasReleasedCOS(b){$(".boardTableTD").removeClass("validPegClass");var a=b;if(isNOTaMemberof(a,currentGame)){setTimeout('playSound("fallback")',250)}putTheMarbleBackCOS(a);setTimeout('getElementStyleObject("body").cursor = "default"; getElementStyleObject("appWrapper").cursor = "default";',100);getElementStyleObject(currentlyDraggedMarble).webkitAnimation="none";return}function marbleWasDroppedCOS(f){getElementStyleObject("movingMarblezIndex").opacity="0";getElementStyleObject("movingMarblezIndex").top="-100px";getElementStyleObject("movingMarblezIndex").left="-100px";var c=f.target.id;sourcePeg=currentlyDraggedMarble;var d=sourcePeg.substring(12);var a=c.substring(3);sourceX=parseInt(d[0]);sourceY=parseInt(d[1]);destX=parseInt(a[0]);destY=parseInt(a[1]);if(isMoveValid(sourceX,sourceY,destX,destY)){$("#"+c).removeClass("validPegClass");playSound("drop");addMarbleToBoard(a);removeMarbleFromBoard(d);var b=getAvgOfCoods(sourceX,sourceY,destX,destY);setTimeout('setInterimOpacity("'+b+'")',250);setTimeout('animateAwayMarble("'+b+'")',300);currentGame[currentGame.length]=b;updateValidMovesDict();updateHints();setTimeout('removeMarbleFromBoard_x("'+b+'"); ',700);setTimeout('document.getElementById("marble'+a+'").style.opacity = "1"; ',300);if(isGameOver()){setTimeout("goToEndGameScreen();",200)}Stack.push(makeArrayCopy(currentGame))}else{document.getElementById("movingMarble"+d).style.opacity=".01";document.getElementById("marble"+d).style.opacity="1"}putTheMarbleBackCOS(d);setTimeout('getElementStyleObject("body").cursor = "-webkit-grab"; getElementStyleObject("appWrapper").cursor = "-webkit-grab";',100);return}function loadHelpPage(c){playSound("tink");var a=parseInt(c.target.id.substring(10,20));for(var b=1;b<=6;b++){if(b<a){goLeft("helpSlide"+b.toString())}if(b==a){getElementStyleObject("helpSlide"+b.toString()).backgroundImage="url(Images/helpPage"+b.toString()+".png)";goCenter("helpSlide"+b.toString())}if(b>a){goRight("helpSlide"+b.toString())}}return}function goLeft(b){var a=getElementObject(b).parentNode.offsetWidth;getElementStyleObject(b).webkitTransform="translate3d(-"+a.toString()+"px, 0, 0)";return}function goCenter(a){getElementStyleObject(a).webkitTransform="translate3d(0px,0,0)";return}function goRight(b){var a=getElementObject(b).parentNode.offsetWidth;getElementStyleObject(b).webkitTransform="translate3d("+a.toString()+"px, 0, 0)";return}function hideSolutionScreen(){playSound("viewChange");getElementStyleObject("solnScreen").backgroundColor="transparent";getElementStyleObject("solnScreen").webkitTransform="scale3d(0,0,0)";if(android){getElementStyleObject("solnScreen").display="none"}return}var currentSolutionStep=1;var solnStartStep=0;var noofSolnSteps=1;function showSolutionScreen(){playSound("viewChange");if(currentSelectedPuzzleBoard==="none"){flashMessage("Please select a Puzzle...",1500);return}if(localStorage.getItem("PUZ_PERF_"+a)=="puzzle_locked"){flashMessage("Puzzle locked!",1500);return}if(lite){tryPaidVersion();return}getElementStyleObject("solnSliderWrapper").display="block";var a=currentSelectedPuzzleBoard;var b=getGameMovesinStringArray(exercisesDict[a+"_MOVES"]);solnStartStep=parseInt(exercisesDict[a+"_START"]);noofSolnSteps=b.length-1-parseInt(exercisesDict[a+"_END"])-solnStartStep;currentSolutionStep=1;updateSolutionBoard();showSolutionScreen_Aux();getElementStyleObject("prevStep").backgroundImage='url("../Images/prev.png")';getElementStyleObject("nextStep").backgroundImage='url("../Images/next.png")';return}function peekSolution(){if(lite){flashMessage("upgrade to use this..",2000);return}playSound("viewChange");var b=getGameMovesinStringArray(exercisesDict[puzCat+"_MOVES"]);solnStartStep=parseInt(exercisesDict[puzCat+"_START"]);currentSolutionStep=Stack.size();noofSolnSteps=b.length-1-parseInt(exercisesDict[puzCat+"_END"])-solnStartStep;var a=b[solnStartStep+currentSolutionStep].splitCSV();getElementObject("solnSliderValue").innerHTML="Step "+(currentSolutionStep).toString()+" of "+(noofSolnSteps).toString();setupPuzzleSolnBoard(a);getElementStyleObject("solnSliderWrapper").display="block";getElementStyleObject("prevStep").backgroundImage='url("../Images/prev.png")';getElementStyleObject("nextStep").backgroundImage='url("../Images/next.png")';showSolutionScreen_Aux();return}function peekTarget(){playSound("viewChange");getElementStyleObject("solnSliderWrapper").display="none";getElementObject("solnSliderValue").innerHTML="TARGET BOARD";var b=getGameMovesinStringArray(exercisesDict[puzCat+"_MOVES"]);solnStartStep=parseInt(exercisesDict[puzCat+"_START"]);noofSolnSteps=b.length-1-parseInt(exercisesDict[puzCat+"_END"])-solnStartStep;var a=b[solnStartStep+noofSolnSteps].splitCSV();setupPuzzleSolnBoard(a);showSolutionScreen_Aux();return}function updateSolutionBoard(){playSound("tink");var b=getGameMovesinStringArray(exercisesDict[puzCat+"_MOVES"]);var a=b[solnStartStep+currentSolutionStep-1].splitCSV();getElementObject("solnSliderValue").innerHTML="Step "+(currentSolutionStep-1).toString()+" of "+(noofSolnSteps).toString();setupPuzzleSolnBoard(a)}function showSolutionScreen_Aux(){getElementObject("solnScreenTitle").innerHTML="puzzle "+getRoman(parseInt(currentSelectedPuzzleCat.substring(5))+1)+" - "+getstringafterus(puzCat);getElementStyleObject("solnScreen").webkitTransform="scale3d(1,1,1)";if(android){getElementStyleObject("solnScreen").webkitTransform="block"}setTimeout('getElementStyleObject("solnScreen").backgroundColor = "rgba(0,0,0,.6)"',700);return}function solnSliderStop(){var b=parseInt(getElementObject("solnSliderKnob").parentNode.offsetWidth)-parseInt(getElementObject("solnSliderKnob").offsetWidth);var a=Math.round(b*solnSliderValue/100);getElementStyleObject("solnSliderKnobMoving").left=a.toString()+"px";getElementStyleObject("solnSliderKnobMoving").top="-62px";getElementStyleObject("solnSliderKnob").left=a.toString()+"px"}function setSliderVal(b){var d=parseInt(getElementObject("solnSliderKnob").parentNode.offsetWidth)-parseInt(getElementObject("solnSliderKnob").offsetWidth);var c=d*b/100;getElementStyleObject("solnSliderKnobMoving").left=c+"px";var a=c;c=parseInt(a*100/d);solnSliderValue=c;solnSliderValueChanged();solnSliderStop();return}function solnSliderDrag(){var c=parseInt(getElementObject("solnSliderKnob").parentNode.offsetWidth)-parseInt(getElementObject("solnSliderKnob").offsetWidth);var b=parseInt(getElementStyleObject("solnSliderKnobMoving").left);var a=0;if(b>0&&b<c){getElementStyleObject("solnSliderKnob").left=b.toString()+"px";a=b}if(b<=0){getElementStyleObject("solnSliderKnob").left="0";a=0}if(b>=c){getElementStyleObject("solnSliderKnob").left=c.toString()+"px";a=c}b=parseInt(a*100/c);if(solnSliderValue!=b){solnSliderValue=b;solnSliderValueChanged()}return}function solnSliderValueChanged(){var a=1+Math.round(parseFloat(noofSolnSteps*solnSliderValue/100));if(a==currentSolutionStep){return}currentSolutionStep=a;updateSolutionBoard();return}function getOffset(c){var b=0;var a=0;while(c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop)){b+=c.offsetLeft;a+=c.offsetTop;c=c.offsetParent}return{top:a,left:b}}function continuePurchase(){backtoLite();if(chromeOS){goog.payments.inapp.buy({parameters:{},jwt:"eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiIxNzY1OTQ2MDUwOTI4MDY3MjA2OSIsImF1ZCI6Ikdvb2dsZSIsInR5cCI6Imdvb2dsZS9wYXltZW50cy9pbmFwcC9pdGVtL3YxIiwiaWF0IjoxMzI1MzU4MzU3LCJleHAiOjEzMjU0NDQ3NTcsInJlcXVlc3QiOnsiY3VycmVuY3lDb2RlIjoiVVNEIiwicHJpY2UiOiIyLjk5IiwibmFtZSI6Ik1hcmJsZSBIb3AiLCJzZWxsZXJEYXRhIjoiRm94eSBOaW5qYSBTdHVkaW9zIiwiZGVzY3JpcHRpb24iOiJVbmxvY2sgdGhlIGFwcCEifX0.7-nPfjw01AugaLKrRsmR9rhl2SnY8fF8JfO3KLHjYK0",success:function(){window.alert("success")},failure:function(){window.alert("failure")}});return}}function marbleIsDraggedCOS(g,a){if(OSX){return}if(isAMemberof(a,currentGame)){return}var c=g.pageX;var f=g.pageY;var b=(c)*100/zoomPercent-50;var d=(f)*100/zoomPercent-50;if(c<screenWidth-40){getElementStyleObject("movingMarblezIndex").left=b.toString()+"px"}if(f<screenHeight-40){getElementStyleObject("movingMarblezIndex").top=d.toString()+"px"}getElementStyleObject("movingMarblezIndex").opacity="1"}function loadHelpImages(){}function nextSolnStep(){if(currentSolutionStep>noofSolnSteps){return}currentSolutionStep=currentSolutionStep+1;updateSolutionBoard();return}function prevSolnStep(){if(currentSolutionStep<=0){return}currentSolutionStep=currentSolutionStep-1;updateSolutionBoard();return};