TDc.prototype.OO=W(1401,function(){if(!this.isDisposed()){var a=this.Fa("waffle-dbsource-pill-menuitem-refreshquery-info-message"),b=Oe("Estimating\u2026");We(a,b);this.tb()&&(P(a,!0),a=this.Fa("waffle-dbsource-pill-menuitem-refreshquery-info-error-button"),P(a,!1))}});VDc.prototype.OO=W(1400,function(){this.C["refresh-query"].OO()});cEc.prototype.OO=W(1399,function(){this.C.OO()});function k5g(a){var b=zK.getInstance();b.D=a;b.C&&b.D.ZE(b.C)}
function l5g(a,b){return new Sp(function(c,d){gr(Ul(Vl(Tl(hr(Sl(a.C.Xe("/answers/tablemetadata"),"did",b),"POST"),2),function(e){var f=new Il;f.Dh=!0;e=f.Ld(Mhc.getDescriptor(),e.Oe());c(e)}),function(){d()})).Re()})}function m5g(a,b,c){var d=new Il;d.Dh=!0;var e=d.sb(b);return new Sp(function(f,h){qq(c,function(){AK(a,"/dbx/validateCalculatedColumn",[],e,function(k){k=d.Ld(sK.getDescriptor(),k.Oe());f(k)},function(){var k=new sK,l=new ph;D(k,1,l);l.Cb(3);D(l,2,31);h(k)})})})}
function n5g(a,b,c){var d=new Il;d.Dh=!0;var e=d.sb(b);return new Sp(function(f,h){qq(c,function(){AK(a,"/dbx/refreshObject",a.F?["esid",a.F]:[],e,function(k){d.Dh=!1;k=d.Ld(ygc.getDescriptor(),k.Oe());f(k)},function(){var k=new ygc,l=new ph;l.Cb(3);D(l,2,31);var n=new oK;D(n,1,l);Yg(k,2,n);h(k)})})})}function o5g(a,b,c,d){Yne(a.F,b,c,d,!0)}function p5g(a,b,c,d){Xne(a.F,b,function(e){var f=e.filter(function(h){return 2!=h.Uh().getState()});0==f.length?c(e):d(f)},d,!0)}
function q5g(a,b){var c=new Set;b.forEach(function(d){a.O.add(d);c.add(d)});Fjc(a,c,"dbobjectmodel-event-update")}function r5g(a){a.od&&a.od.Wc(a.La(),a.O?5:1,new bn(0,a.O?50:0,12,a.O?0:50))}function s5g(a,b,c,d,e,f,h,k){tM.call(this,a,b,c,d,e,k);this.F=new cEc(h,d.Mb(),k);this.Ga(this.F,!0);this.H=f;this.C=null}t(s5g,tM);s5g.prototype.Ca=function(){var a=this.oa().Ca("DIV","waffle-dbsource-container");this.pb(a)};
s5g.prototype.Ia=function(){tM.prototype.Ia.call(this);this.C=new xB(this.La(),this.oa());yB(this.C)};s5g.prototype.xd=function(){Tf(this.C);tM.prototype.xd.call(this)};s5g.prototype.focus=function(){var a=this.F;a.D.isVisible()&&a.D.isEnabled()&&(a.D.La().focus(),a.D.Qs(!0));this.H.Cb(2)};function t5g(a){return a.D?Object.values(a.D).find(function(b){if(!(b instanceof hO))return!1;b=b.getElement();return!!b&&!!b.querySelector(":hover")})||null:null}
function u5g(a){return(a=t5g(a.J))?a.ge().getId():null}function v5g(a){return(a=u5g(a))?ritz_api.BigSheetsApi.getExternalDataIdForObject(a):null}function w5g(a){for(var b=a.J.C,c=b.length-1;0<=c;c--){var d=nO(a.J,b[c]).ge();if(d instanceof bM&&null!=d.D&&(d=d.getId(),ritz_api.BigSheetsApi.getExternalDataIdForObject(d)))return d}return null}
function x5g(a){var b=a.O.C.C;if(aG(b))return ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(b.kb());(b=v5g(a))||(b=(b=FRc(a))?GRc(a,b):null);if(b||(b=(b=w5g(a))?ritz_api.BigSheetsApi.getExternalDataIdForObject(b):null))return b;b=NI(a.Ua());return GRc(a,b)}function y5g(a,b){[a.J,a.V].forEach(function(c){return c.setPosition(b)});a.C.some(function(c){c.C.setPosition(b)})}var z5g={2:ila,3:kia};function A5g(a,b,c){this.D=a;this.C=b;this.F=c}A5g.prototype.As=g("D");
function B5g(){var a=new dC,b="Configure a project in the Google Cloud Platform console to continue. "+(a.$c("a",{"class":"goog-inline-block",href:"https://connectedsheets.page.link/addproject",target:"_blank"})+("Learn more"+a.Zc("a")));return a.format(b)}function C5g(a,b){return{title:a,body:b}}function m4(a){return C5g("Query failed",a)}function D5g(a){return a?Ppf[a]||"other":"other"}
function E5g(a,b){var c=b.getErrorCode();b=b.Tn();if(0==a)return m4(Mpf(b));switch(c){case 36:case 20:return m4(Epf(3,b));case 37:return m4(Fpf(b));case 6:return a=(new JA("{objectType, select, chart {The data source took too long to return this chart. Please try again.} pivot_table {The data source took too long to return this pivot table. Please try again.} formula {The data source took too long to return this formula result. Please try again.} record {The data source took too long to return this extract. Please try again.} datasource_preview {The data source took too long to return this preview. Please try again.} other {The data source took too long to return data. Please try again.}}")).format({objectType:D5g(a)}),
C5g("Timed out",Gpf(a,b));case 8:c=Qpf.format(z(y(),"febpr")?5E4:3E4);var d=Qpf.format(z(y(),"femdrr")?5E4:25E3);c=(new JA("{objectType, select, chart {Results exceed {maxRows} rows. Update this chart and try again.}pivot_table {Update the number of rows and/or columns to a maximum of {dbPivotTableMaxRows} by using filtering, grouping, or customizing number of rows and/or columns. Then, try again.}formula {Results exceed {maxRows} rows. Update this function and try again.} record {Results exceed {dbRecordMaxRows} rows. Update this extract and try again.} datasource_preview {Results exceed {maxRows} rows. Update this connected sheet and try again.} other {Results exceed {maxRows} rows. Update this query and try again.}}")).format({objectType:D5g(a),
maxRows:Hpf,dbPivotTableMaxRows:c,dbRecordMaxRows:d});return C5g(1==a?"Rows and/or columns exceed limit":"Too many rows",Gpf(c,b));case 18:return C5g("Unsupported type",UY("The query returns an ARRAY or a STRUCT type, which is currently not supported."));case 19:return m4(Jpf());case 22:return m4(Kpf());case 26:return m4(UY("The column type of connected data is not compatible with the operation."));case 30:return m4(UY("Sorting by an array column is not supported for connected sheets and extracts."));
case 32:return C5g("Too many customized number of rows & columns",UY("Your pivot table contains one or more array database columns. Only one can have customized number of rows or columns."));case 33:return m4(UY("Results exceed storage limit. Update query and run again."));case 35:return a=(new JA("{objectType, select, chart {A column referenced by this chart is not available.} pivot_table {A column referenced by this pivot table is not available.} formula {A column referenced by this formula is not available.} record {A column referenced by this extract is not available.} datasource_preview {The column settings do not match the data source. Try removing sorts, filters and calculated columns and try again.} other {A column referenced by this object is not available.}}")).format({objectType:D5g(a)}),
a=UY(a),m4(a);case 34:return a=(new JA("{objectType, select, chart {A calculated column referenced by this chart no longer exists. Update and try again.} pivot_table {A calculated column referenced by this pivot table no longer exists. Update and try again.} formula {A calculated column referenced by this formula no longer exists. Update and try again.} record {A calculated column referenced by this extract no longer exists. Update and try again.} datasource_preview {A calculated column referenced by this preview no longer exists. Update and try again.} other {A calculated column referenced by this object no longer exists. Update and try again.}}")).format({objectType:D5g(a)}),
a=UY(a),m4(a);case 38:return m4(Mpf(null));case 39:return m4(Lpf());case 40:return m4(UY("A calculated column has an invalid formula. Update and try again."))}return m4(Mpf(b))}function F5g(){var a='<div class="'+T("waffle-bigquerydbsourcesettingsdialog-project-section")+'"><h3 class="'+T("waffle-bigquerydbsourcesettingsdialog-project-header")+'">';a=a+'Choose a cloud project</h3><div class="'+(T("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper")+'"></div></div>');return S(a)}
function G5g(){var a='<div class="'+T("waffle-bigquerydbsourcesettingsdialog-footer-wrapper")+'"><p class="'+T("waffle-bigquerydbsourcesettingsdialog-footer-message")+'">';return S(a+'Your use of BigQuery is governed by the <a href="https://cloud.google.com/terms/" target="_blank">Google Cloud Platform Terms of Service</a>.</p></div>')};function H5g(a,b,c,d){$Y.call(this,"waffle-bigquerydbsourcesettingsdialog",d);d=c?"Edit data connection":"Add data connection";this.setTitle(this.oa().Ca("SPAN",void 0,d));this.J=a;this.H=b;this.F=c||null;this.D=new Hqf(void 0,this.oa());this.Ga(this.D)}t(H5g,$Y);
H5g.prototype.Ca=function(){$Y.prototype.Ca.call(this);dy(this.wb(),F5g);CY(this).appendChild(fy(G5g));this.D.render(this.eb("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"));eX(this.D).setAttribute("placeholder","Search projects");this.oa().Ti(this.D.La(),!1)};H5g.prototype.Ia=function(){var a=this;$Y.prototype.Ia.call(this);this.D.po(!0);tqf(this.J).then(function(b){a.tb()&&(b&&0!=b.length||a.H.C(36566),I5g(a,b),a.D.po(!1))},function(){a.reject(!0)})};
function I5g(a,b){if(0==b.length){var c=a.oa(),d=Np(c,B5g());P(a.Fa("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"),!1);c.appendChild(a.Fa("waffle-bigquerydbsourcesettingsdialog-project-section"),c.Ca("DIV","waffle-bigquerydbsourcesettingsdialog-error-caption",d))}else J5g(a,b),a.getHandler().listen(a.D,"action",function(e){return K5g(a,e,b)})}
function J5g(a,b){b=L5g(b);Jqf(a.D,b);Oqf(a.D);b=a.D;var c="We are only showing the top "+(SDc.format(1E4)+" projects. Use the search bar to find unlisted projects.");b.F.setVisible(!0);b.F.C.setContent(b.oa().Ca("DIV",void 0,b.oa().Ca("DIV",{id:"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-aria-content","class":"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-content"},qp(Oe(c)))));Kqf(a.D)}function L5g(a){return ed(a,function(b){return new vqf(b.getId(),b.getName())})}
function K5g(a,b,c){b=b.target.Ua();var d=b instanceof vqf?b.hT:b.getValue();vx(a.La(),"waffle-bigquerydbsourcesettingsdialog-transition-out");a.D.J3("translateX(-24px)").then(function(){return a.resolve(new sqf(c,d,d,"db-source-table",a.F))})};function M5g(a){a=a.Pm;var b='<div class="'+T("waffle-calculated-columns-description")+'">';b=b+'Calculated columns let you create new columns for better analysis by using Sheets functions and the current data in your connected sheet.<div class="'+(T("waffle-calculated-columns-tooltip")+'"></div></div><div class="'+T("waffle-calculated-columns-display-name-title")+'" id="waffle-calculated-columns-display-name-title">');b=b+"Calculated column name</div>"+((a?'<div class="'+T("waffle-calculated-columns-toggle-tabs")+
" "+T("waffle-gm-sidebar")+'"></div><div class="'+T("waffle-calculated-columns-column-menu-tab")+'"></div><div class="'+T("waffle-calculated-columns-function-menu-tab")+'"></div>':"")+R(Vnf({cd:"waffle-calculated-columns-display-name-input",maxLength:50}))+'<div class="'+T("waffle-calculated-columns-display-name-error")+'"></div><div class="'+T("waffle-calculated-columns-formula-editor")+'"></div>');return S(b)};function N5g(){var a=S;var b=S('<svg class="waffle-calculated-columns-tooltip-help-icon" xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 24 24" fill="#5F6368"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>');return a('<div class="waffle-calculated-columns-tooltip-container"><div class="waffle-calculated-columns-tooltip-help-button">'+
b+"</div></div>")};function O5g(a,b){Q.call(this,b);this.H=new az(void 0,Ey(Zy,"waffle-calculated-columns-tooltip-help-button"),this.oa());this.Ga(this.H);this.C=new Qy(this.oa());this.qa(this.C);this.D=null;this.qa(this.D);this.F=null;this.O=a;this.L=Xy(Ty(new Sy,1))}t(O5g,Q);
O5g.prototype.Ca=function(){this.pb(fy(N5g));this.H.Wa(this.Fa("waffle-calculated-columns-tooltip-help-button"));this.C.Kc("waffle-calculated-columns-tooltip-help-bubble");this.C.gr(!1);Ry(this.C,!0);this.C.setPosition(1,2,0,-7);this.F=this.oa().Ca("A",{target:"_blank"},"Learn more");Ye(this.F,"https://connectedsheets.page.link/calccolhelp");var a="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("RIGHT")+"(orderId, 4)"),b="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("YEAR")+"(startDate)"),
c="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("IF")+"(units > 0, total/units, 0)");this.C.setContent(this.oa().Ca("DIV",void 0,this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-title",qp(Oe("Try these formulas"))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",qp(Oe("Do basic math"))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-example",qp(Oe("=price * quantity"))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",
qp(Oe("Manipulate text"))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-example",qp(Oe(a))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",qp(Oe("Use dates"))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-example",qp(Oe(b))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",qp(Oe("Apply conditional logic"))),this.oa().Ca("DIV","waffle-calculated-columns-tooltip-help-bubble-example",qp(Oe(c))),this.oa().Ca("DIV",
"waffle-calculated-columns-tooltip-help-bubble-link",this.F)));this.C.render();a=this.C.La();this.oa().Ti(a,!0);ox(a,"hidden",!1);this.C.setVisible(!1)};
O5g.prototype.Ia=function(){var a=this;Q.prototype.Ia.call(this);var b=this.Fa("waffle-calculated-columns-tooltip-help-button");this.C.cj(this.oa().Iw(b));rx(b,"Try these formulas");tz(b,"Support",void 0);N_e(b);this.getHandler().listen(this.H,"action",this.J).listen(this.C.getElement(),"keydown",this.R).listen(this.C,"hide",function(){return xx(a.La(),"waffle-calculated-columns-tooltip-help-bubble-visible")}).listen(this.F,"click",function(){a.O.C(36653,a.L)})};
O5g.prototype.R=function(a){27===a.keyCode&&(this.J(),this.Fa("waffle-calculated-columns-tooltip-help-button").focus())};O5g.prototype.J=function(){var a=!zab(this.C.D);zx(this.La(),"waffle-calculated-columns-tooltip-help-bubble-visible",a);this.C.setVisible(a);Tf(this.D);a?(this.O.C(36652,this.L),this.D=new xB(this.C.La(),this.oa()),this.qa(this.D),yB(this.D),this.C.getElement().focus()):this.Fa("waffle-calculated-columns-tooltip-help-button").blur()};function P5g(a,b){this.D=b;this.C=new Map;Q5g(this,a)}function R5g(a){return a.replace(/^[\t\r\n]+|[\t\r\n]+$/g,"").replace(/[\t\r\n]+/g," ")}function Q5g(a,b){b=b.map(function(c){return DK(c)});a.C=new Map(b.map(function(c){return[lI(c,a.D),c]}))}function S5g(a){var b=[];a.C.forEach(function(c,d){Wg(c,2)||b.push(d)});return b}function T5g(a){var b=[];a.C.forEach(function(c,d){b.push(d)});return b};function U5g(a){a=a.Wlb;return S('<div class="waffle-calculated-columns-formula-editor-container"><div class="waffle-calculated-columns-formula-editor-input-container"><textarea class="'+T("waffle-calculated-columns-formula-editor-input")+'" spellcheck="false" placeholder="'+T(a)+'"></textarea></div></div>')};function V5g(a,b){return S('<div class="'+T("waffle-calculated-columns-validation-widget")+'"><div class="'+T("waffle-calculated-columns-validation-widget-open-button")+'"><div class="'+T("waffle-calculated-columns-validation-widget-spinner")+'">'+R(f5e({Gb:!0},b))+"</div>"+R(f4e())+R(LDc(null))+R(e4e())+'</div><div class="'+T("waffle-calculated-columns-validation-widget-bar")+'"><div class="'+T("waffle-calculated-columns-validation-widget-spinner")+'">'+R(f5e({Gb:!0},b))+"</div>"+R(f4e())+R(LDc(null))+
R(e4e())+'<div class="'+T("waffle-calculated-columns-validation-widget-message")+'"></div><div class="'+T("waffle-calculated-columns-validation-widget-close-button")+'">'+R(c4e(null,b))+"</div></div></div>")};function W5g(a,b,c){Q.call(this,c);this.H=a;this.L=b;this.J=Xy(Ty(new Sy,1));this.D=new az(void 0,Ey(Zy,"waffle-calculated-columns-validation-widget-open-button"),this.oa());this.Ga(this.D);this.C=new az(void 0,Ey(Zy,"waffle-calculated-columns-validation-widget-close-button"),this.oa());this.Ga(this.C);this.F=!1}t(W5g,Q);W5g.prototype.Ca=function(){this.pb(fy(V5g));this.C.Wa(this.Fa("waffle-calculated-columns-validation-widget-close-button"));this.D.Wa(this.Fa("waffle-calculated-columns-validation-widget-open-button"))};
W5g.prototype.Ia=function(){var a=this;Q.prototype.Ia.call(this);this.D.Qd("Show the formula validation widget");this.C.Qd("Close the formula validation widget");this.D.Pa(this.H);this.D.setVisible(this.H);this.getHandler().listen(this.C,"action",function(){return a.setVisible(!1)}).listen(this.D,"action",function(){a.setVisible(!0);a.L.C(36654,a.J);var b=a.Fa("waffle-calculated-columns-validation-widget-message");mJ(Ep(b))});X5g(this)};
W5g.prototype.setVisible=function(a){this.F=a;this.tb()&&zx(this.La(),"waffle-calculated-columns-validation-widget-visible",this.F)};W5g.prototype.isVisible=g("F");
function X5g(a){xx(a.La(),"waffle-calculated-columns-validation-widget-valid");xx(a.La(),"waffle-calculated-columns-validation-widget-invalid");xx(a.La(),"waffle-calculated-columns-validation-widget-loading");var b="Try this example: ="+(ritz_api.RitzModelApi.getLocalizedFunctionName("ROUND")+"(<BigQueryColumnName>, 2) * 5");Y5g(a,b);a.D.Qd("Show the formula validation widget")}function Y5g(a,b){var c=a.Fa("waffle-calculated-columns-validation-widget-message");b=Oe(b);We(c,b);a.F&&mJ(Ep(c))};function Z5g(a,b,c,d,e,f,h,k){Q.call(this,k);this.V=a;this.xa=b;this.Ja=c;this.R=d;this.C=new OX("");this.qa(this.C);this.H=this.J=null;this.O=!1;this.F=new W5g(d,h,this.oa());this.Ga(this.F);this.Ma=f;this.ma=this.L=!1;this.Ea=e;this.D=h;this.Ba=Xy(Ty(new Sy,1))}t(Z5g,Q);m=Z5g.prototype;m.Ca=function(){Q.prototype.Ca.call(this);this.pb(fy(U5g,{Wlb:"=Write formula here"}))};
m.Ia=function(){Q.prototype.Ia.call(this);this.C.mU(255);var a=this.Fa("waffle-calculated-columns-formula-editor-input");this.C.Wa(a);ox(a,"label","Formula editor");this.J=new lB(a);this.F.render(this.La());this.R&&(this.H=new Fx(this.C.getElement()),this.getHandler().listen(this.J,"input",this.D5).listen(this.H,"focusin",this.t0b).listen(this.H,"focusout",this.u0b));null!=this.xa&&(this.C.setValue(ritz_api.BigSheetsApi.getCalculatedColumnFormulaString(Kl((new Il).sb(this.xa),bg),this.V)),this.R&&
this.D5());this.C.Pa(this.R)};m.xd=function(){Q.prototype.xd.call(this);Tf(this.J)};m.t0b=function(){ux(this.La(),"waffle-calculated-columns-formula-editor-container-invalid")||vx(this.La(),"waffle-calculated-columns-formula-editor-container-focus")};m.u0b=function(){xx(this.La(),"waffle-calculated-columns-formula-editor-container-focus")};
m.D5=function(){if(this.L)this.ma=!0,$5g(this);else{var a=Jl(this.Ea.getRitzCalculatedColumnFormulaValidationResult(this.V,a6g(this),T5g(this.Ja)),z5g);a=(new Il).Ld(tK.getDescriptor(),a);switch(a.getStatus()){case 4:this.D.C(36699);break;case 12:this.D.C(36701);break;case 7:var b=new dae;var c=Wg(a,5)?C(a,5):"CUSTOM_OR_NON_ENGLISH_FUNCTION";b=L(b,1,c);c=new Ek;b=ak(c,27,b);b=Xy(Wy(Ty(new Sy,1),b));this.D.C(36700,b)}1!=a.getStatus()?(a=a.Tn(),b6g(this,!1,a)):(a=C(a,2),0==ah(a,1).length?b6g(this,!0,
null):c6g(this,a))}};function c6g(a,b){a.L=!0;$5g(a);var c=new fhc;D(c,2,a.V);D(c,1,b);m5g(zK.getInstance(),c,a.Ma).then(function(d){d=d.Uh();3==d.getState()?(d="BigQuery error: "+d.Tn(),b6g(a,!1,d)):b6g(a,!0,null);d6g(a)},function(){b6g(a,!1,"Formula validation failed");d6g(a)})}function d6g(a){a.L=!1;a.ma&&(a.ma=!1,a.D5())}
function b6g(a,b,c){a.O=b;if("="==Md(a6g(a)))xx(a.La(),"waffle-calculated-columns-formula-editor-container-invalid"),X5g(a.F);else{zx(a.La(),"waffle-calculated-columns-formula-editor-container-invalid",!b);b&&Pp(a.oa())==a.C.getElement()&&vx(a.La(),"waffle-calculated-columns-formula-editor-container-focus");var d=a.F;xx(d.La(),"waffle-calculated-columns-validation-widget-loading");zx(d.La(),"waffle-calculated-columns-validation-widget-valid",b);zx(d.La(),"waffle-calculated-columns-validation-widget-invalid",
!b);b?c=b="Formula is valid":(b=c,c="Formula is invalid. Click for more detail.");Y5g(d,b);d.D.Qd(c)}a.dispatchEvent(new e6g("validation-update"))}function a6g(a){a=a.C.getValue();return HE(jf(a))?a:"="+a}
function $5g(a){a.O=!1;a.dispatchEvent(new e6g("validation-update"));xx(a.La(),"waffle-calculated-columns-formula-editor-container-invalid");a=a.F;vx(a.La(),"waffle-calculated-columns-validation-widget-loading");xx(a.La(),"waffle-calculated-columns-validation-widget-valid");xx(a.La(),"waffle-calculated-columns-validation-widget-invalid");a.F&&Y5g(a,"");a.D.Qd("Show the formula validation widget")}function e6g(a,b){Ho.call(this,a,b)}t(e6g,Ho);function f6g(a,b){var c=a.description;return S(R(gnf({M_:"",match:"",L_:a.label},b))+g6g({M_:"",match:"",L_:c},b))}function g6g(a){var b=a.M_,c=a.match;a=a.L_;return S('<span class="'+T("waffle-function-filtered-menu-item-description")+'"><span>'+R(b)+'</span><span class="'+T("waffle-function-filtered-menu-item-description-match")+'">'+R(c)+"</span><span>"+R(a)+"</span></span>")};function h6g(a,b,c){inf.call(this,a,b,c,new i6g)}t(h6g,inf);h6g.prototype.Ia=function(){inf.prototype.Ia.call(this);this.Kc("waffle-function-filtered-menu-item")};h6g.prototype.Xd=function(){return this.Ua().c_};
h6g.prototype.C=function(a){a=void 0===a?"":a;var b=this.Ug();if(b){b=b.match(new RegExp(pf(a),"i"));var c=this.Xd().match(new RegExp(pf(a),"i"));this.setVisible(""===a||!!b||!!c);jnf(this,b?b.index:0,b?a.length:0);b=c?c.index:0;c=c?a.length:0;a=this.oa();c=b+c;var d=this.Xd();b=ey(g6g,{M_:d.substring(0,b),match:d.substring(b,c),L_:d.substring(c,d.length)});c=a.Fa("waffle-function-filtered-menu-item-description",this.La());a.YC(b,c)}else this.setVisible(!a)};
function i6g(){dz.apply(this,arguments)}t(i6g,dz);i6g.prototype.Ca=function(a){a=a.Ua();var b=fy(f6g,{label:a.getName(),description:a.c_});this.Ce(b,a.getName()+". "+a.c_);return b};za(i6g);function j6g(){dX.apply(this,arguments)}t(j6g,dX);j6g.prototype.Ca=function(){dX.prototype.Ca.call(this);vx(this.La(),"waffle-function-filtered-menu")};j6g.prototype.Ia=function(){dX.prototype.Ia.call(this);eX(this).setAttribute("placeholder","Search");kz(this,!1)};j6g.prototype.Yf=ba();function k6g(a,b,c,d,e){nJ.call(this,153);this.L=a;this.O=b;this.J=c||"";this.F=d;this.C=e}t(k6g,nJ);k6g.prototype.Id=function(){var a=new sTb;D(a,1,this.L);D(a,4,this.O);D(a,3,this.J);D(a,2,this.F);for(var b=0;b<this.C.length;b++)Yg(a,5,this.C[b]);return a};function l6g(a,b,c,d,e,f,h,k,l,n){iB.call(this);this.xa=a;this.Qe=new O5g(n,this.oa());this.Ga(this.Qe);this.V=b;if(null==b)b=null;else{var q=new rh;D(q,2,b);b=q}this.ma=b;this.fb=c;this.Ra=d;this.jb=e;this.L=f;this.C=new PA("Enter name");this.Ja=null;this.H=new Z5g(a,this.ma,d,f,k,l,n,this.oa());this.Ga(this.H);this.R=this.O=this.F=null;f&&(this.F=new pY(void 0,this.oa()),this.O=new j6g(void 0,this.oa()),this.R=new xY("Columns","Functions",!0,this.oa()),this.Ga(this.F),this.Ga(this.O),this.Ga(this.R));
this.cb=h;this.Xa=n;this.Va=Xy(Ty(new Sy,1))}t(l6g,iB);m=l6g.prototype;m.Ka=function(){iB.prototype.Ka.call(this)};
m.Ca=function(){iB.prototype.Ca.call(this);var a=null==this.V?"Add calculated column":this.L?"Edit calculated column":"View calculated column";this.setTitle(a);vx(Ox(this),"waffle-calculated-columns-dialog");var b=new Qx;b.set("cancel","Cancel",!1,!0);this.L&&b.set("save",null==this.V?"Add":"OK",!0,!1);Tx(this,b);cy(this,"save");(b=Kab(this))&&rx(b,a);a=fy(M5g,{Pm:this.L});b=this.wb();this.oa().appendChild(b,a);this.Qe.render(this.Fa("waffle-calculated-columns-tooltip"));this.H.render(this.Fa("waffle-calculated-columns-formula-editor"))};
m.Ia=function(){iB.prototype.Ia.call(this);zx(Ox(this),"waffle-calculated-columns-dialog-view-only",!this.L);var a=this.oa().Fa("waffle-calculated-columns-display-name-input");this.C.Wa(a);this.C.Pa(this.L);this.Ja=new lB(a);var b=this.oa().Fa("waffle-calculated-columns-display-name-title");ox(a,"labelledby",b.id);null!=this.ma&&(this.C.setValue(lI(this.ma,this.xa)),this.iQa());this.mEa();if(this.L){a=this.Fa("waffle-calculated-columns-column-menu-tab");this.R.D=a;a=this.Fa("waffle-calculated-columns-function-menu-tab");
this.R.F=a;this.R.render(this.Fa("waffle-calculated-columns-toggle-tabs"));this.F.render(this.Fa("waffle-calculated-columns-column-menu-tab"));this.O.render(this.Fa("waffle-calculated-columns-function-menu-tab"));eX(this.F).setAttribute("placeholder","Search");kz(this.F,!1);a=ja(this.fb);for(b=a.next();!b.done;b=a.next())b=b.value,Wg(DK(b),2)||onf(this.F,b,this.xa);b=pkc(this.jb,!1,!1,!0);a=this.O;b=ja(b);for(var c=b.next();!c.done;c=b.next()){var d=c.value;c=a;var e=d.getName();d=new h6g(e,d,c.oa());
c.Ga(d,!0)}this.getHandler().listen(this,"dialogselect",this.s0b).listen(this.Ja,"input",this.iQa).listen(this.H,"validation-update",this.mEa).listen(this.F,"action",this.Mtb).listen(this.O,"action",this.Zyb)}};m.xd=function(){iB.prototype.xd.call(this);Tf(this.Ja)};
m.s0b=function(a){var b=this;if("save"==a.key){if(a=a6g(this.H),!Ld(a)){var c=null==this.V;a=new k6g(this.xa,R5g(this.C.getValue()),this.V,a,S5g(this.Ra));var d=c?36645:36647,e=c?36644:36646;oJ(a,function(f){b.Xa.C(f?e:d,b.Va);f&&b.dispatchEvent(new m6g("update",b.xa,c))});this.cb.C(a)}}else"cancel"==a.key&&this.Xa.C(36643,this.Va)};
m.Mtb=function(a){var b=a.target.Ug();a=this.H;b=wqc(b);var c=a.C.getElement().selectionStart,d=a.C.getElement().selectionEnd,e=a.C.getValue(),f=c+b.length;a.C.setValue(e.slice(0,c)+b+e.slice(d));a.C.getElement().setSelectionRange(f,f);a.D5();a.D.C(36732,a.Ba)};
m.Zyb=function(a){var b=a.target.getValue().getName();a=this.H;var c=a.C.getElement().selectionStart,d=a.C.getElement().selectionEnd,e=a.C.getValue();b=b+"("+e.slice(c,d)+")";e=e.slice(0,c)+b+e.slice(d);b=c+b.length;c==d&&--b;c=b;a.C.setValue(e);a.C.getElement().setSelectionRange(c,c);a.D5();a.D.C(36733,a.Ba)};
m.iQa=function(){var a=n6g(this);zx(this.C.getElement(),"waffle-calculated-columns-display-name-input-invalid",!!a);var b=a?a:"";a=this.Fa("waffle-calculated-columns-display-name-error");b=Oe(b);We(a,b);mJ(Ep(a));this.mEa()};m.mEa=function(){var a=this.L&&!n6g(this)&&!ef(this.C.getValue())&&this.H.O;Vx(this.D,"save",a)};
function n6g(a){if(ef(a.C.getValue()))var b=null;else a:{b=a.Ra;var c=a.C.getValue();a=a.ma;c=R5g(c);if(Ld(c))b="Calculated column name cannot be empty";else{for(var d=ja(b.C.keys()),e=d.next();!e.done;e=d.next())if(e=e.value,Kd(e,c))if(d=null!=a,b=b.C.get(e),d&&a.equals(b))break;else{b="A column named "+(c+" already exists");break a}b=null}}return b}function m6g(a,b,c){Ho.call(this,a);this.Bv=b;this.C=c}t(m6g,Ho);function o6g(){var a='<div class="'+T("waffle-dbanswers-answers-bar")+'"><div class="'+T("waffle-dbanswers-answers-bar-controls")+'"><div class="'+T("waffle-dbanswers-answers-bar-input")+'"></div><div class="'+T("waffle-dbanswers-answers-bar-enable-button")+'">';a=a+'Enable</div></div><div class="'+(T("waffle-dbanswers-answers-bar-message")+'"></div></div>');return S(a)};function p6g(){var a='<div class="'+T("waffle-dbanswers-answers-bar-enable-answers-popup")+'">',b='To perform natural language queries on this data, ask the table owner or admin to follow the <div class="'+(T("waffle-dbanswers-answers-bar-enable-answers-popup-setup-link")+'">setup instructions.</div>');return S(a+b+"</div>")};function q6g(a,b){Q.call(this,b);this.F=a;this.C=new Ny;Oy(this.C,0);bcb(this.C,5,5,5,5);Sme(this.C,!0);this.qa(this.C);this.D=new az(null,new YQ,this.oa());this.Ga(this.D)}t(q6g,Q);m=q6g.prototype;m.Ca=function(){var a=fy(p6g);this.pb(a);ox(a,"hidden",!0);P(a,!1);this.C.$z(a);this.D.Wa(this.eb("waffle-dbanswers-answers-bar-enable-answers-popup-setup-link"))};m.Ia=function(){Q.prototype.Ia.call(this);this.getHandler().listen(this.D,"action",this.fJb)};
m.cj=function(a){this.C.setPosition(new lz(a,0,!0))};m.setVisible=function(a){this.C.setVisible(a);a&&this.D.La().focus()};m.isVisible=function(){return this.C.isVisible()};m.Wc=function(){this.C.Wc()};m.fJb=function(a){a.stopPropagation();a.preventDefault();a=Xy(Ty(new Sy,75));this.F.C(36761,a);z(y(),"docs-idu")?cf("https://sites.google.com/corp/google.com/data-qna#h.p_Vf6xbc97l9jL"):cf("https://docs.google.com/document/u/1/d/e/2PACX-1vRNytdUb20j3I6WPQXLmmIfOHkWR3a0iPg4ck1AdXzSznrW3USl3NtYGIk34sBQaxl_fSiUPclFqJK4/pub?urp=gmail_link#h.ng0zmdirli5c")};function r6g(a,b,c,d,e,f){YW.call(this,a,b,c,Hic.getInstance(),"db",d,e,f);this.D="";this.R=0;this.xa=new aS(void 0,this.oa());this.Ga(this.xa);this.V=new q6g(b,this.oa());this.Ga(this.V);this.ma=null}t(r6g,YW);m=r6g.prototype;m.Gc=function(a){this.pb(a);var b=fy(o6g);this.oa().appendChild(a,b);a=this.eb("waffle-dbanswers-answers-bar-input");this.H.render(a);this.xa.Wa(this.eb("waffle-dbanswers-answers-bar-enable-button"));this.V.render();this.V.cj(this.xa.La())};
m.Ia=function(){YW.prototype.Ia.call(this);this.OY()};m.OY=function(){YW.prototype.OY.call(this);this.getHandler().listen(this.xa,"action",this.mxb)};m.xG=function(){return fI(this.J.C)&&z(y(),"feda")?YW.prototype.xG.call(this):!1};m.Pa=function(a){this.tb()&&(0!=this.R&&z(y(),"fedaic")?(YW.prototype.Pa.call(this,!1),s6g(this,!0)):(s6g(this,!1),YW.prototype.Pa.call(this,a)))};m.lP=function(){YW.prototype.lP.call(this);this.V.isVisible()&&this.V.Wc()};m.TSa=function(a){i3e(a,null,this.D,this.F)};
m.Z9=function(){this.D?t6g(this):this.tC();j3e(null,this.D,this.F)};m.tC=function(){YW.prototype.tC.call(this);this.D="";j3e(null,null,this.F)};m.fda=function(){return u6g(this.R)};m.WCa=ea(!0);function v6g(a,b){a.D!=b&&(a.D=b,z(y(),"fedaic")?(a.ma&&a.ma.cancel(),a.ma=l5g(zK.getInstance(),a.D),$p(a.ma.then(function(c){a.R=bh(c,1);c=0==a.R;a.Pa(c);c?a.xG()&&a.Z9():a.tC()},function(c){c instanceof aq||(a.R=4,a.Pa(!1),a.tC())}),function(){a.ma=null})):a.xG()&&a.Z9())}
function t6g(a){if(Uaf(a)){var b=a.O;b.D=a.D;b.uN();k5g(b);b.VO([]);var c=a.J;cq(function(){a.D&&EK(c.xa,a.D,!0).then(function(d){return w6g(a,d,a.D)})},3E3)}}function w6g(a,b,c){b.forEach(function(d){var e=ijc(d,c);if(null!=e){var f=a.O;a:{if(d.hasType())switch(d.getType()){case 1:case 2:case 4:case 5:case 6:case 7:d="$dim";break a;case 3:d="$met";break a}d="$unu"}xic(f,e,d)}})}
function s6g(a,b){a.xa.setVisible(1==a.R);var c=a.eb("waffle-dbanswers-answers-bar-message");b=b?u6g(a.R):"";a.oa().Be(c,b)}m.mxb=function(){this.L.C(36760,Vaf(this));this.V.setVisible(!0)};
function u6g(a){switch(a){case 1:return"The admin for this table hasn't enabled Answers yet.";case 2:return"Answers is not yet supported for data sets created by custom query.";case 3:return"The admin for this table hasn't enabled Answers yet.";case 4:return"Answers is unavailable at the moment, please try again later.";case 5:return"This data table is being setup for Answers in the background. Please try again in some time.";default:return""}};function x6g(a){var b=a.label;a=a.Ri;return S((a?'<div class="'+T("goog-menuitem-icon")+" "+T("waffle-charteditor-column-filtered-menu-item-icon")+" "+T(a)+'"></div>':"")+'<span class="'+T("waffle-datasource-configbar-columns-menu-item-label")+'">'+R(b)+"</span>")}function y6g(){return S('<div class="'+T("waffle-datasource-configbar-columns-menu-spinner-container")+'"></div>')};function z6g(a){jz.call(this,a);this.ze=new hW(!1);this.qa(this.ze);this.C=new ez(fy(y6g),void 0,this.oa());this.C.aB(!1);this.Ga(this.C)}t(z6g,jz);z6g.prototype.Ia=function(){jz.prototype.Ia.call(this);vx(this.La(),"waffle-datasource-configbar-columns-menu")};z6g.prototype.Ca=function(){jz.prototype.Ca.call(this);this.C.render(this.La());this.ze.render(this.C.Fa("waffle-datasource-configbar-columns-menu-spinner-container"))};
z6g.prototype.D=function(a,b){a=ja(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=ijc(d,b);null!==c&&(d=mnf(d.getType()),this.Ga(new ez(fy(x6g,{label:c,Ri:d}),void 0,this.oa()),!0))}};function A6g(a,b){var c=a.C.getElement();c&&(zx(c,"waffle-datasource-configbar-columns-menu-loading",b),P(c,b),a.ze.setActive(b))};function B6g(){jz.apply(this,arguments)}t(B6g,jz);B6g.prototype.Ia=function(){jz.prototype.Ia.call(this);vx(this.La(),"waffle-datasource-configbar-formula-menu")};B6g.prototype.qK=function(a){var b=this;this.Ga(a,!0);this.getHandler().listen(a,"action",function(){var c=new pG("insert-formula-function");c.xa=a.getValue();b.dispatchEvent(c)})};function C6g(a,b){a='<div class="'+T("waffle-dbsource-configbar-wrapper")+'"><div class="'+T("waffle-dbsource-configbar")+'"><div class="'+T("waffle-dbsource-configbar-header")+'"><div class="'+T("waffle-dbsource-configbar-header-icon")+'">'+R(d4e({color:"#5f6368",Nva:24},b))+'</div><div class="waffle-dbsource-configbar-header-title" role="textbox" tabindex="0" aria-label="';a+=bx("Connected sheet name");a+='"></div><div class="waffle-dbsource-configbar-header-subtitle"></div><div class="'+T("waffle-dbsource-configbar-separator")+
'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-refresh-options-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-options-wrapper")+'"><div class="'+T("waffle-dbsource-configbar-watch-tutorial-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-send-feedback-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-connection-settings-button-wrapper")+'"></div></div></div><div class="'+T("waffle-dbsource-configbar-actions")+
'"><div class="'+T("waffle-dbsource-configbar-columns-menu-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-chart-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-pivot-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-function-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+
" "+T("waffle-dbsource-configbar-table-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-button-wrapper")+" "+T("waffle-dbsource-configbar-calculated-column-button-wrapper")+'"></div><div class="'+T("waffle-dbsource-configbar-answers-wrapper")+'"></div></div></div></div>';return S(a)}
function D6g(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#188038" fill-rule="nonzero"><path d="M14.5263158 2C15.3368421 2 16 2.7 16 3.55555556V14.4444444C16 15.3 15.3368421 16 14.5263158 16H3.47368421C2.66315789 16 2 15.3 2 14.4444444V3.55555556C2 2.7 2.66315789 2 3.47368421 2H14.5263158zM3.5 3.5v11h11v-11h-11z"/><path d="M6.75 12.75h-1.5V7.5h1.5zM9.75 12.75h-1.5v-7.5h1.5zM12.75 12.75h-1.5v-3h1.5z"/></g></svg>');a=R(a)+"<span>";return S(a+
"Chart</span>")}function E6g(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" fill-rule="evenodd" d="M10 13h1.185c.9975 0 1.815-.81 1.815-1.815V10h-2.25l3-3 3 3H14.5v1.185c0 1.83-1.485 3.315-3.315 3.315H10v2.25l-3-3 3-3V13zM8 6V2h6.5454545C15.3454545 2 16 2.72 16 3.6V6H8zM2 6V3.6C2 2.72 2.72 2 3.6 2H6v4H2zm1.6 10c-.88 0-1.6-.6545455-1.6-1.4545455V8h4v8H3.6z"/></svg>');a=R(a)+"<span>";return S(a+"Pivot table</span>")}
function F6g(){var a=R(crf())+"<span>";return S(a+"Extract</span>")}function G6g(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" d="M15 2H3v1.75L8.143 9 3 14.25V16h12v-2.625H7.286L11.571 9 7.286 4.625H15z"/></svg>');a=R(a)+"<span>";return S(a+"Function</span>")}
function H6g(){var a=S('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path fill="#188038" d="M20 13h-7v7h-2v-7H4v-2h7V4h2v7h7v2z"/></g></svg>');a=R(a)+"<span>";return S(a+"Calculated column</span>")}
function I6g(){var a='<span class="'+T("waffle-dbsource-configbar-secondary-button-content")+'">';var b=S('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#5f6368" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-3.5l6-4.5-6-4.5z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+R(b)+"<span>";return S(a+"Watch tutorial</span></span>")}
function J6g(){var a='<span class="'+T("waffle-dbsource-configbar-secondary-button-content")+'">';var b=S('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#5f6368" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+R(b)+"<span>";return S(a+"Send feedback</span></span>")};function K6g(a,b,c,d,e,f,h){Q.call(this,h);this.Ba=a;this.R=b;this.xa=c;this.jb=d;this.ma=b.xa;this.fb=f;this.V=new Nz;this.qa(this.V);this.C=new $N("Columns",new z6g(this.oa()),void 0,this.oa());this.C.Kc("waffle-dbsource-configbar-columns-menu-button");this.C.Ai(!0);this.Ga(this.C);this.Ja=L6g(this,"waffle-dbsource-configbar-chart-button",fy(D6g));this.Qa=L6g(this,"waffle-dbsource-configbar-pivot-button",fy(E6g));this.Ea=L6g(this,"waffle-dbsource-configbar-table-button",fy(F6g));a=fy(G6g);this.H=
new pz(a,new B6g(this.oa()),bEd.getInstance(),this.oa());this.H.Kc("waffle-dbsource-configbar-function-button");this.H.Ai(!0);this.H.Oo(!0);this.Ga(this.H);this.O=L6g(this,"waffle-dbsource-configbar-calculated-column-button",fy(H6g));this.J=new ZN("Refresh options");this.J.Kc("waffle-dbsource-configbar-refresh-options-button");this.J.Kc("waffle-dbsource-flat-default");this.Ga(this.J);this.Va=L6g(this,"waffle-dbsource-configbar-secondary-button",fy(I6g));this.Xa=L6g(this,"waffle-dbsource-configbar-secondary-button",
fy(J6g));this.L=new ZN(fy(qB,{icon:"docs-icon-img docs-icon-settings"}),this.oa());this.L.Kc("waffle-dbsource-configbar-connection-settings-button");this.Ga(this.L);this.cb=new Map([[this.C,""],[this.Ja,"chart"],[this.Qa,"pivot table"],[this.Ea,"table"],[this.H,"function"],[this.O,""],[this.J,""],[this.L,""]]);this.Ra=new Map([[this.C,"fedsccm"],[this.Ja,"fedbc"],[this.Qa,"fedp"],[this.Ea,"fedr"],[this.H,"fedf"],[this.O,"fedcc"]]);this.Sa=new Map([[this.J,KC],[this.L,Tvb],[this.O,Hvb]]);this.D=null;
z(y(),"feda")&&(this.D=new r6g(this.R,this.xa,this.jb,e,75,this.oa()),this.Ga(this.D));this.Ma=this.F=null}t(K6g,Q);m=K6g.prototype;m.Ca=function(){this.pb(fy(C6g))};
m.Ia=function(){var a=this;Q.prototype.Ia.call(this);this.C.render(this.Fa("waffle-dbsource-configbar-columns-menu-button-wrapper"));this.Ja.render(this.Fa("waffle-dbsource-configbar-chart-button-wrapper"));this.Qa.render(this.Fa("waffle-dbsource-configbar-pivot-button-wrapper"));this.Ea.render(this.Fa("waffle-dbsource-configbar-table-button-wrapper"));this.H.render(this.Fa("waffle-dbsource-configbar-function-button-wrapper"));this.O.render(this.Fa("waffle-dbsource-configbar-calculated-column-button-wrapper"));
this.J.render(this.Fa("waffle-dbsource-configbar-refresh-options-button-wrapper"));this.Va.render(this.Fa("waffle-dbsource-configbar-watch-tutorial-button-wrapper"));this.Xa.render(this.Fa("waffle-dbsource-configbar-send-feedback-button-wrapper"));this.L.render(this.Fa("waffle-dbsource-configbar-connection-settings-button-wrapper"));this.D&&this.D.Wa(this.Fa("waffle-dbsource-configbar-answers-wrapper"));Pz(this.V,this.J,KC);Pz(this.V,this.O,Hvb);Pz(this.V,this.Va,Wvb,M6g);Pz(this.V,this.Xa,(Ft(),
uv),M6g,function(){return{source:"big-sheets-feedback"}});Pz(this.V,this.L,Tvb,N6g,function(){return new Qqf(O6g(a),"show-current-source")});this.F=this.Fa("waffle-dbsource-configbar-header-title");this.getHandler().listen(this.Ja,"action",this.Gsb).listen(this.Qa,"action",this.TFb).listen(this.Ea,"action",this.zLb).listen(this.H,"show",this.nvb).listen(this.O,"action",this.gsb).listen(this.J,"action",this.lHb).listen(this.C,"show",this.Ptb).listen(this.Ba,"ua",this.K_b).listen(this.F,["focus","mousedown"],
this.KDb).listen(this.R,"external_datasource_status",this.wIb);this.getHandler().listen(this.D?this.D.getElement():this.O.La(),"keydown",this.bBb);z(y(),"fedsccm")||this.C.setVisible(!1);this.refresh()};m.bBb=function(a){9===a.keyCode&&(a.preventDefault(),this.dispatchEvent(new P6g))};m.setVisible=function(a){P(this.La(),a);if(this.D&&a){a="";var b=wP(this.Ba);b&&b.ag()&&(a=b.ag());v6g(this.D,a)}};m.isVisible=function(){return Cw(this.La())};
m.refresh=function(){Q6g(this,wP(this.Ba).we());var a=this.Fa("waffle-dbsource-configbar-header-subtitle"),b=R6g(this);b?(b+=" Rows",this.oa().Be(a,b)):this.oa().Be(a,"");a=!BYe(this.ma,O6g(this));b=!(CK(this.R.H)||this.R.D.ah());S6g(this,b,a,this.R.Od());this.C.zd(!1);T6g(this);this.D&&v6g(this.D,O6g(this));this.Ma&&(dq(this.Ma),this.Ma=null)};function L6g(a,b,c){c=new aS(c,a.oa());c.Kc(b);a.Ga(c);return c}m.Gsb=function(){mjc(this.ma);t7b(null,void 0,O6g(this));this.xa.C(36528,U6g())};
m.TFb=function(){mjc(this.ma);var a=new vi,b=O6g(this);D(a,1,b);b=f3e();D(b,15,a);D(b,17,!1);a=g3e(b);a=new Q6e(null,X1b(a),void 0);n7b(a);this.xa.C(36527,U6g())};m.zLb=function(){mjc(this.ma);w7b(O6g(this));this.xa.C(36529,U6g())};m.nvb=function(){var a=this.H.Bb();if(a&&0==a.mc()){a=this.H.Bb();var b=nCe(new mCe(this.R.Va,a,this.fb),void 0,!0);b=ja(b);for(var c=b.next();!c.done;c=b.next())a.qK(c.value)}mjc(this.ma)};m.gsb=function(){this.xa.C(36748,U6g())};m.lHb=function(){this.xa.C(36749,U6g())};
m.KDb=function(a){if(!this.F.isContentEditable&&!lM(this.R)){this.F.contentEditable=!0;if("focus"===a.type){a=window.getSelection();var b=document.createRange();b.selectNodeContents(this.F);a.removeAllRanges();a.addRange(b)}this.getHandler().listen(this.F,"keydown",this.J_b).listen(this.F,"blur",this.LJb)}};m.J_b=function(a){switch(a.keyCode){case 13:this.F.blur();break;case 27:V6g(this,!0)}};
m.LJb=function(){var a=this;window.getSelection().removeAllRanges();this.Ma=cq(function(){a.dispatchEvent(new W6g(wP(a.Ba).kb(),Fp(a.F)));V6g(a,!1)})};function V6g(a,b){a.F.contentEditable=!1;To(a.F,"keydown");To(a.F,"blur");b&&Q6g(a,wP(a.Ba).we())}m.Ptb=function(){var a=this,b=this.C.Bb();A6g(b,!0);var c=O6g(this);EK(this.ma,c).then(function(d){T6g(a);0<d.length?b.D(d,c):(a.C.zd(!1),a.refresh())})};m.K_b=function(a){Q6g(this,a.hn)};m.wIb=function(){null!=D1b(this.R.C)&&this.refresh()};
function Q6g(a,b){var c=a.Fa("waffle-dbsource-configbar-header-title");a.oa().Be(c,b)}
function S6g(a,b,c,d){var e=b&&!d;a.cb.forEach(function(f,h){var k=!a.Ra.has(h)||z(y(),a.Ra.get(h)),l=!a.Sa.has(h)||a.Sa.get(h).isEnabled();h==a.J?h.Pa(b&&k&&l):h!=a.L&&h.Pa(e&&c&&k&&l);k=R6g(a);var n;h.isEnabled()&&h==a.Ea?n=z(y(),"femdrr")?"Insert an extract of up to 50k rows to a different sheet":"Insert an extract of up to 25k rows to a different sheet":h.isEnabled()&&h==a.O?n="Add a calculated column":h.isEnabled()&&h==a.J?n="Refresh now or schedule a refresh":h.isEnabled()&&h==a.L?n="Update connection settings":
n=h.isEnabled()&&k&&f?"Insert "+(f+(" based on "+(k+" rows"))):h.isEnabled()&&f?"Insert "+f:!h.isEnabled()&&c?"You don't have permission or access to refresh or edit analysis with this connected data.":h.isEnabled()||c?"":"There was an error fetching the database schema.";tz(h.La(),n,void 0);n&&zqe(h.La(),"waffle-dbsource-configbar-db-object-creation-button-tooltip")});a.D&&a.D.Pa(b&&c)}function O6g(a){return wP(a.Ba).ag()}function T6g(a){a=a.C.Bb();for(A6g(a,!1);1<a.mc();)a.jo(1,!0)}
function R6g(a){return(a=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(O6g(a)))?bEc.format(parseInt(a,10)):null}function U6g(){var a=Gk(new Ek,!0);return Xy(Wy(Ty(new Sy,75),a))}function W6g(a,b){Ho.call(this,"datasheet-rename");this.Ph=a;this.name=b}t(W6g,Ho);function P6g(){Ho.call(this,"configbar-dom-focus-out")}t(P6g,Ho);var M6g={enabled:!0,selected:!0,visible:!0},N6g={enabled:!0};function X6g(a,b,c,d,e,f,h,k,l){Uo.call(this);this.D=a;this.F=b;this.R=l;this.L=c;this.ma=d;this.O=e;this.H=f;this.J=h;this.V=k;this.Oa=new Vo(this);this.qa(this.Oa);this.C=null;this.Oa.listen(this.D,["na","Fa"],this.vSa).listen(this.D,["oa","Ea"],this.uJb).listen(this.F,["acl_change","offline_status","readonly_status"],this.Vpb);this.vSa()}t(X6g,Uo);m=X6g.prototype;
m.vSa=function(){var a=wP(this.D);a&&aG(a)&&(this.C?this.C.refresh():(this.C=new K6g(this.D,this.F,this.L,this.ma,this.V,this.R),a=this.C.oa(),this.C.render(a.getElement("waffle-dbsource-configbar-id")),this.C.Zd(this),this.Oa.listen(this.C,"insert-formula-function",this.lKb).listen(this.C,"datasheet-rename",this.dvb).listen(this.C,"configbar-dom-focus-out",this.hub)),this.C.setVisible(!0),Mwe())};m.dvb=function(a){var b=this;a=new nTc(a.Ph,a.name);oJ(a,function(c){c||V6g(b.C,!0)});this.J.C(a)};
m.hub=function(){EO(sJ(this.H))};m.lKb=function(a){var b=this,c=wP(this.D),d=c.ag();if(d){var e=c.we(),f=a.xa;GZe(this.O,function(h,k){var l=ritz_api.BigSheetsApi.getDatasourceReferenceString(e,null);eHa([EK(b.F.xa,d),eq(1E3)]).then(function(){return Y6g(b,f,l,k)})},"Insert Formula");this.L.C(36535,U6g())}};
function Y6g(a,b,c,d){if(d)a.F.C.yC(d.Ej,function(){var f=hI(a.F.C),h=new Wm(d.C,d.Ck);RI(f,h);Z6g(a,b,c,h)});else{var e=new rne($H(a.F.C)+1);oJ(e,function(f){f&&Z6g(a,b,c,new Wm)});a.J.C(e)}}function Z6g(a,b,c,d){WH(uJ(a.H).C,un(d)).addCallback(function(){upe(sJ(a.H),b,c)})}m.uJb=function(){this.C&&this.C.setVisible(!1)};m.Vpb=function(){var a=wP(this.D);a&&aG(a)&&this.C&&this.C.refresh()};m.Ka=function(){Uo.prototype.Ka.call(this);Tf(this.C)};function $6g(){var a='<div class="'+T("waffle-create-datasheet-welcome-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_welcome.png" class="'+T("waffle-create-datasheet-welcome-dialog-image")+'" alt=""><h3 class="'+T("waffle-create-datasheet-welcome-dialog-welcome-message")+'"><span>';a=a+'Connect and analyze big data in Sheets</span></h3><div class="'+(T("waffle-create-datasheet-welcome-dialog-welcome-description")+'">');a=a+"Connect to BigQuery, Google's cloud data warehouse, to analyze and share billions of rows of data with your colleagues - all within Sheets</div><div class=\""+
(T("waffle-create-datasheet-welcome-dialog-button-wrapper")+'"></div></div>');return S(a)};function a7g(a){$Y.call(this,"waffle-create-datasheet-welcome-dialog",a);this.F=new aS("Learn the basics",this.oa());this.Ga(this.F);this.D=new IB("Get connected",this.oa());this.Ga(this.D)}t(a7g,$Y);m=a7g.prototype;
m.Ca=function(){$Y.prototype.Ca.call(this);dy(this.wb(),$6g);this.F.render(this.Fa("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.F,"action",this.L_b);this.D.render(this.Fa("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.D,"action",this.LXa);nx(this.Fa("waffle-dataconnector-modal-title"));var a=this.Fa("waffle-create-datasheet-welcome-dialog-welcome-message");a.id=Nw(this,"waffle-create-datasheet-welcome-dialog-welcome-message");
mx(a,"heading");ox(this.La(),"labelledby",a.id);a=this.Fa("waffle-create-datasheet-welcome-dialog-welcome-description");a.id=Nw(this,"waffle-create-datasheet-welcome-dialog-welcome-description");ox(this.La(),"describedby",a.id)};m.L_b=function(){Rw("https://connectedsheets.page.link/support")};m.LXa=function(){this.resolve(!0)};m.cva=function(a){13==a.keyCode&&this.LXa()};m.C5=function(){Vub.qb();this.reject()};m.iF=function(){Vub.qb();this.reject()};function b7g(a){a=a.eob;a='<div class="'+T("waffle-create-datasource-sheet-loading-dialog-section")+'"><img class="'+T("waffle-create-datasource-sheet-loading-dialog-image")+'" src="'+T(dx(a))+'" alt=""><div class="'+T("waffle-create-datasource-sheet-loading-dialog-tip")+'">';return S(a+"Connecting data\u2026</div></div>")};function c7g(a,b,c){BY.call(this,"waffle-create-datasource-sheet-loading-dialog",c);this.F=a;this.D=b}t(c7g,BY);c7g.prototype.Ca=function(){BY.prototype.Ca.call(this);dy(this.wb(),b7g,{eob:this.F});nx(this.Fa("waffle-dataconnector-modal-title"));var a=this.Fa("waffle-create-datasource-sheet-loading-dialog-tip");a.id=Nw(this,"waffle-create-datasource-sheet-loading-dialog-tip");mx(a,"heading");ox(this.La(),"labelledby",a.id)};c7g.prototype.Ia=function(){BY.prototype.Ia.call(this);this.D.C(36758,d7g())};
c7g.prototype.Ka=function(){BY.prototype.Ka.call(this);this.D.C(36759,d7g())};function d7g(){var a=Gk(new Ek,!0);return Xy(Wy(Ty(new Sy,75),a))};function e7g(){var a='<div class="'+T("waffle-create-datasource-sheet-success-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_success_2.gif" class="'+T("waffle-create-datasource-sheet-success-dialog-image")+'" alt=""><h5 class="'+T("waffle-create-datasource-sheet-success-dialog-success-message")+'">';a=a+'Success! Your BigQuery data is connected and ready to analyze</h5><div class="'+(T("waffle-create-datasource-sheet-success-dialog-metadata-wrapper")+" "+T("waffle-create-datasource-sheet-success-dialog-datasource-info")+
'"></div><div class="'+T("waffle-create-datasource-sheet-success-dialog-success-description")+'">');a=a+"Create pivot tables, formulas, and charts in the same way you're already familiar with</div><div class=\""+(T("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper")+'"></div><div class="'+T("waffle-create-datasource-sheet-success-dialog-watch-tutorial")+" "+T("goog-link-button")+'"><span>');return S(a+"Watch video tutorial</span></div></div>")};function f7g(a,b,c){BY.call(this,"waffle-create-datasource-sheet-success-dialog",c);this.J=a;this.H=b;this.F=new IB("Start analyzing",this.oa());this.Ga(this.F);this.D=new az(void 0,fN.getInstance(),this.oa());this.Ga(this.D)}t(f7g,BY);
f7g.prototype.Ca=function(){var a=this;BY.prototype.Ca.call(this);dy(this.wb(),e7g);var b=this.Fa("waffle-create-datasource-sheet-success-dialog-metadata-wrapper");this.oa().Be(b,g7g(this.J,this.H));this.F.render(this.Fa("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper"));this.D.Wa(this.Fa("waffle-create-datasource-sheet-success-dialog-watch-tutorial"));nx(this.Fa("waffle-dataconnector-modal-title"));b=this.Fa("waffle-create-datasource-sheet-success-dialog-success-message");
b.id=Nw(this,"waffle-create-datasource-sheet-success-dialog-success-message");mx(b,"heading");ox(this.La(),"labelledby",b.id);b=this.Fa("waffle-create-datasource-sheet-success-dialog-success-description");b.id=Nw(this,"waffle-create-datasource-sheet-success-dialog-success-description");ox(this.La(),"describedby",b.id);this.getHandler().listen(this.F,"action",function(){return a.iF()}).listen(this.D,"action",function(){return Wvb.qb()})};
function g7g(a,b){a=(new JA("{NUM_COLUMNS, plural,=0 {No columns}=1 {1 column}other {# columns}}")).format({NUM_COLUMNS:a});return b?b+" rows \u2022 "+a:a};function h7g(a,b,c,d,e,f,h,k,l,n,q,r){mrf.call(this,new uof(n.getType(),l,"filter_db_sheet",r),a,b,c,d,e,f,h,k,l,q,r);this.Xa=DK(n);this.Pc=!Wg(this.Xa,2)&&Wg(n,6)&&C(n,6);this.Lc=new Il}t(h7g,mrf);m=h7g.prototype;m.Ca=function(){mrf.prototype.Ca.call(this);var a=EN(this.D,this.oh());y5g(this.H.C,500<a.left?0:3)};
m.ASa=function(){var a=this.Ua().Jb(),b=ritz_api.BigSheetsApi.getDatasourceSheetCriteria(a,Kl(this.Lc.sb(this.Xa),bg)),c=null,d=null;0<b.length&&(c=this.Lc.Ld(Rh.getDescriptor(),Jl(b[0],rja)),d=Kcf(a));Mcf(this.H,c,d);a=this.Ea;b=this.Ma;c=this.Ua().Jb();c=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(c,Kl(this.Lc.sb(this.Xa),bg));zx(a.La(),"waffle-datasourcesheet-sort-selected",0==c);zx(b.La(),"waffle-datasourcesheet-sort-selected",1==c);a.Pa(null!=c||!this.Pc);b.Pa(null!=c||!this.Pc);a=this.C;
b=a.Bb().La();vx(b,"waffle-datasourcesheet-filterbox-container");qV(a);yw(b,"");a.Am()};m.WPa=function(a){if("filtering_cancelled"==a.type)this.Va();else if(a=this.oh(),a=Fcf(this.H,this.Ua().Jb(),a.y,a.x,!1,!1),!ocf(this.H.C)){if(null==a)var b=new TW("filterClear");else b=new TW("filterUpdate"),b.D=a;b.Ba=this.Xa;this.dispatchEvent(b);this.Va()}};m.wva=function(a){var b=new TW("filterSort");b.Ba=this.Xa;b.xa=a?1:0;this.dispatchEvent(b)};m.Hwa=ea(!1);
m.Wna=function(a){var b=this.D,c=FN(b,"r",a.y),d=b.C,e=2*d.C,f=this.Ua().ih(a.y,a.x).getFormat();c=-c-e;a="rtl"==(f.D||null)||"auto-rtl"==(f.D||null)?e:FN(b,"c",a.x)-16*d.C-e;d=d.C;this.RA(new Wm(a/d,c/d))};function i7g(a,b,c,d,e,f){d=void 0===d?null:d;e=void 0===e?!1:e;f=void 0===f?!1:f;nJ.call(this,147);this.R=a.Jb();this.O=b;this.C=c||[];this.F=d;this.J=e;this.L=f}t(i7g,nJ);i7g.prototype.Id=function(){var a=new hTb;D(a,1,this.R);D(a,7,this.O);if(this.J)D(a,5,!0);else for(var b=0;b<this.C.length;b++)Yg(a,3,this.C[b]);this.L?D(a,6,!0):null!=this.F&&D(a,4,this.F);return a};
i7g.prototype.equals=function(a){return this.R==a.R&&this.O.equals(a.O)&&this.J==a.J&&this.L==a.L&&this.F==a.F&&Cd(this.C,a.C,function(b,c){return b.equals(c)})};function j7g(a,b,c,d,e,f,h){A.call(this);this.Ba=a;this.R=h;this.xa=b;this.D=c;this.ma=d;this.V=e;this.O=f;this.Oa=new Vo(this);this.qa(this.Oa);this.C=null;this.F=new Il;this.H=new Lz(this);this.qa(this.H);this.Oa.listen(this.D,"filter-triggered",this.J);this.H.subscribe(UC,"action",this.J)}t(j7g,A);
j7g.prototype.J=function(){var a=wP(this.xa);if(a&&aG(a)){var b=sJ(this.D),c=k7g(this),d=OI(c),e=MI(k7g(this));d=new Wm(d.x,e.y);e=Doe(c,d.x);this.C&&(this.C.dispose(),this.C=null);this.C=new h7g(c,this.V,b.R,b.D,b.F,new zM(d),!1,!1,this.ma,e,this.R);this.qa(this.C);ON(MRc(b),this.C);this.Oa.listen(this.C,"filterClear",this.Ea).listen(this.C,"filterSort",this.Ja).listen(this.C,"filterUpdate",this.L);this.C.Wna(d);this.C.Oc();this.C.C.zd(!0);b=DK(e);a=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(a.kb(),
Kl(this.F.sb(b),bg));b=fp("waffle-autofilter-sort waffle-datasourcesheet-sort-selected");null!=a&&b&&(rx(b,b.innerText+" selected"),zx(b,"hc-enabled-focus","black"==vz()))}};j7g.prototype.Ea=function(a){a=new i7g(k7g(this),a.Ba,null,null,!0);l7g(this,a)};j7g.prototype.L=function(a){var b=new Rh;D(b,4,a.D);a=new i7g(k7g(this),a.Ba,[b],null);l7g(this,a)};
j7g.prototype.Ja=function(a){var b=k7g(this).Jb(),c=a.Ba;b=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(b,Kl(this.F.sb(c),bg));var d=!1;switch(a.xa){case 1:d=0==b;break;case 0:d=1==b}a=d?new i7g(k7g(this),c,null,null,void 0,!0):new i7g(k7g(this),c,null,1==a.xa?0:1);l7g(this,a)};function l7g(a,b){a.O.C(b);BZe(MRc(sJ(a.D)));Tf(a.C);a.C=null}function k7g(a){return hI(a.Ba.C)};function m7g(a,b,c,d,e,f,h){A.call(this);var k=this;this.Oa=new Vo(this);this.qa(this.Oa);this.xa=a;this.J=a.O;this.F=b;this.C=c;this.V=e;this.R=f;this.O=new Lz(this);this.qa(this.O);this.ma=h;this.H=this.D=null;n7g(this);o7g(this,d);this.L=new Co;this.qa(this.L);Do(this.L,this.J.D,function(l){var n=p7g(k);n&&CYe(l,n)&&q7g(k,n)});this.e7()}t(m7g,A);function n7g(a){var b=new Zv(["waffle-dbsheet-or-dbobject-pill-active"]);a.R.C(Nvb,b)}
function o7g(a,b){var c=nG(a.xa.C);a.Oa.listen(b,"J",a.kLb).listen(c,"fc",a.O_b).listen(c,["Pb","bc"],a.e7).listen(a.F,"na",a.e7).listen(a.C,"activeCellChange valueChange blurEmbeddedObject embeddedObjectMouseEnter embeddedObjectMouseLeave focusEmbeddedObject".split(" "),a.e7).listen(a.C,"inputBoxActivate",a.Rfa).listen(a.C,"mouseover",a.N_b).listen(a.C,"refresh-db-object-request",a.QRa).listen(a.F,"oa",a.pqa).listen(a.C,"db-connection-settings",a.cQa);a.O.subscribe(Nvb,"action",a.M_b)}m=m7g.prototype;
m.Ka=function(){this.pqa();A.prototype.Ka.call(this)};m.O_b=function(){var a=sJ(this.C);a&&tJ(this.C)&&gRc(a)};m.pqa=function(){Uf(r7g(this),s7g(this),this.D);this.H=this.D=null};m.kLb=function(){this.D&&r5g(this.D)};
m.e7=function(){var a=sJ(this.C),b=wP(this.F);if(a&&b){b=!!a.Xa;var c=!!HRc(a);b||!c||a.Xa||(a.Xa=new s5g(a.Ua(),a.R,a.D,a.F,new zM(CRc(a),new Wm(0,0)),a.Ea,a.ub,a.ib),JO(a.V,"default",a.Xa,!0),a.qa(a.Xa),a.Xa.setVisible(!0));b=a.Ua();a=HRc(a)||OI(b);(a=yI(nI(b,a),a,b.Jb()))&&(a.C||a.D)?this.Rfa():(a=p7g(this),(a!=this.H||t7g(this,a))&&q7g(this,a))}else this.pqa()};
function t7g(a,b){if(!b||2!=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b))return!1;var c=sJ(a.C);if(!c)return!1;b=w5g(c);c=u5g(c);if(b==c)return!1;a=r7g(a);return b&&null==c&&a&&a.isVisible()&&null!=a.C.Bb()&&a.C.Bb().isVisible()?!1:!0}
function q7g(a,b){if(b){a.Rfa();var c=u7g(a);if(c){var d=rT(a.J,b);var e=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b);var f=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(b),h=null;f&&(h=(f=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(f))?parseInt(f,10):null);e=new A5g(b,e,h);hEc(c,d,e);4==e.C&&r5g(c);v7g(a,b,c,d);a.H=b}}else a.Rfa()}m.Rfa=function(){var a=r7g(this);a&&a.setVisible(!1);(a=s7g(this))&&a.setVisible(!1);this.H=null};
m.M_b=function(){var a=u7g(this);a&&(a.La().focus(),this.V.Cb(2))};m.QRa=function(){var a=p7g(this);if(a)switch(ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a)){case 1:Xub.qb(a);break;case 5:$ub.qb(a);break;case 3:evb.qb(a);break;case 2:Yub.qb(a);break;case 4:Rvb.qb(a)}};m.cQa=function(){var a=p7g(this);if(a){var b=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(a);b&&(a=ritz_api.BigSheetsApi.getSheetIdForDatasourceId(b))&&yP(this.F,a,function(){Tvb.qb(new Qqf(b,"show-current-source"))})}};
m.N_b=function(a){var b=wP(this.F),c=sJ(this.C);c&&b&&3!=b.getSheetType()&&(a=a.Ek)&&ctc(a)&&(this.e7(),gRc(c))};
function u7g(a){var b=p7g(a);if(!b)return null;var c=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b);if(4==c)if(3!=wP(a.F).getSheetType())a=null;else{if(!a.D){c=sJ(a.C);b=c.Pe();a.D=new cEc(a.ma,b);a.Oa.listen(a.D,"refresh-db-object-request",a.QRa).listen(a.D,"db-connection-settings",a.cQa);c=new lx(c.Ja.J,b?5:1);a.D.render();var d=a.D;d.od=c;d.O=b}a=a.D}else if(2==c)if(a=sJ(a.C))a:if(c=a.J.C,v5g(a)==b)b=t5g(a.J).ge().getId(),a=TRc(a,b);else{for(d=c.length-1;0<=d;d--){var e=c[d];if(e&&
ritz_api.BigSheetsApi.getExternalDataIdForObject(e)==b){a=TRc(a,e);break a}}a=null}else a=null;else a=s7g(a);return a}function r7g(a){return(a=sJ(a.C))?SRc(a):null}function s7g(a){a=sJ(a.C);return a?(a=a.Xa)?a.F:null:null}function p7g(a){return(a=sJ(a.C))?x5g(a):null}function v7g(a,b,c,d){MC.isEnabled()&&w7g(d.getType())&&(c.OO(),$ne(a.J,b,function(e){return c.Jx(e)},function(e){return c.oD(e)}))}function w7g(a){return"no-results"==a||"fetch-successful"==a||"fetch-failed"==a};function x7g(a,b){nJ.call(this,154);this.F=a;this.C=b}t(x7g,nJ);x7g.prototype.Id=function(){var a=new uTb;D(a,1,this.F);for(var b=0;b<this.C.length;b++)Yg(a,2,this.C[b]);return a};function y7g(a){this.Hd=On(a,-1,0)}t(y7g,Sn);y7g.prototype.sf=function(){return new z7g(this)};function z7g(a){eo.call(this,a)}t(z7g,eo);function A7g(a){this.Hd=On(a,-1,0)}t(A7g,Sn);A7g.prototype.sf=function(){return new B7g(this)};function B7g(a){eo.call(this,a)}t(B7g,eo);function C7g(a){this.Hd=On(a,-1,0)}t(C7g,Sn);C7g.prototype.sf=function(){return new D7g(this)};C7g.prototype.getFormat=function(){return this.Wh(2,A7g)};C7g.prototype.getEntries=function(a){return Rn(this.Hd,3,a,y7g)};function D7g(a){eo.call(this,a)}t(D7g,eo);D7g.prototype.getFormat=function(){return this.message.getFormat()};D7g.prototype.getEntries=function(a){return this.message.getEntries(a)};function E7g(a){this.Hd=On(a,-1,0)}t(E7g,Sn);E7g.prototype.sf=function(){return new F7g(this)};E7g.prototype.getName=function(){return co(this,1)};E7g.prototype.hasType=function(){return Vn(this,2)};E7g.prototype.getType=function(){return ao(this,2,0)};function F7g(a){eo.call(this,a)}t(F7g,eo);m=F7g.prototype;m.getName=function(){return this.message.getName()};m.Xc=function(a){return jo(this,1,a)};m.hasType=function(){return this.message.hasType()};m.getType=function(){return this.message.getType()};
m.setType=function(a){return io(this,2,a)};m.clearType=function(){return go(this,2)};m.setMode=function(a){return io(this,4,a)};function G7g(a){this.Hd=On(a,-1,0)}t(G7g,Sn);G7g.prototype.sf=function(){return new H7g(this)};function H7g(a){eo.call(this,a)}t(H7g,eo);function I7g(a){this.Hd=On(a,-1,0)}t(I7g,Sn);I7g.prototype.sf=function(){return new J7g(this)};function J7g(a){eo.call(this,a)}t(J7g,eo);function K7g(a){this.Hd=On(a,-1,0)}t(K7g,Sn);K7g.prototype.sf=function(){return new L7g(this)};K7g.prototype.getValue=function(a){return Rn(this.Hd,2,a,I7g)};function L7g(a){eo.call(this,a)}t(L7g,eo);L7g.prototype.getValue=function(a){return this.message.getValue(a)};L7g.prototype.setValue=function(a,b){return aWe(this,2,a,b)};function M7g(a){this.Hd=On(a,-1,0)}t(M7g,Sn);m=M7g.prototype;m.sf=function(){return new N7g(this)};m.getColumnCount=function(){return Wn(this,1)};m.getColumn=function(a){return Rn(this.Hd,1,a,E7g)};m.wr=function(a){return Rn(this.Hd,2,a,K7g)};m.getMetadata=function(){return this.Wh(3,G7g)};function N7g(a){eo.call(this,a)}t(N7g,eo);m=N7g.prototype;m.getColumnCount=function(){return this.message.getColumnCount()};m.getColumn=function(a){return this.message.getColumn(a)};m.wr=function(a){return this.message.wr(a)};
m.i9=function(a){aWe(this,2,a,void 0)};m.xp=function(a){return TCa(this,2,a)};m.getMetadata=function(){return this.message.getMetadata()};function O7g(a){this.Hd=On(a,-1,0)}t(O7g,Sn);O7g.prototype.sf=function(){return new P7g(this)};O7g.prototype.hasValue=function(){return Vn(this,2)};O7g.prototype.getValue=function(){return this.Wh(2,rYe)};function P7g(a){eo.call(this,a)}t(P7g,eo);P7g.prototype.hasValue=function(){return this.message.hasValue()};P7g.prototype.getValue=function(){return this.message.getValue()};P7g.prototype.setValue=function(a){return UCa(this,2,a)};function Q7g(a){this.Hd=On(a,-1,0)}t(Q7g,Sn);Q7g.prototype.sf=function(){return new R7g(this)};Q7g.prototype.getColumnIndex=function(){return Yn(this,1)};Q7g.prototype.getCellValue=function(){return this.Wh(2,O7g)};function R7g(a){eo.call(this,a)}t(R7g,eo);R7g.prototype.getColumnIndex=function(){return this.message.getColumnIndex()};R7g.prototype.getCellValue=function(){return this.message.getCellValue()};function S7g(a){this.Hd=On(a,-1,0)}t(S7g,Sn);S7g.prototype.sf=function(){return new T7g(this)};S7g.prototype.sj=function(){return Yn(this,1)};S7g.prototype.Bp=function(a){return Rn(this.Hd,2,a,Q7g)};function T7g(a){eo.call(this,a)}t(T7g,eo);T7g.prototype.sj=function(){return this.message.sj()};T7g.prototype.Bp=function(a){return this.message.Bp(a)};function U7g(a){this.Hd=On(a,-1,0)}t(U7g,Sn);U7g.prototype.sf=function(){return new V7g(this)};U7g.prototype.wr=function(a){return Rn(this.Hd,3,a,S7g)};function V7g(a){eo.call(this,a)}t(V7g,eo);V7g.prototype.wr=function(a){return this.message.wr(a)};V7g.prototype.i9=function(a){aWe(this,3,a,void 0)};V7g.prototype.xp=function(a){return TCa(this,3,a)};function W7g(a,b){this.D=a;this.C=b};function X7g(a){this.D=a;this.C={}}
function Y7g(a,b){b&&b.forEach(function(c){if(a.C[c]){var d=(new Date).getTime()-a.C[c].D,e=rjc(c),f=e?e.getState():null;if(e&&f&&(2==f||3==f)){if(e=Z7g[f]){d=Ak(new zk,1E3*d);var h=a.C[c].C;f=new J$d;f=L(f,2,h);var k=ritz_api.RitzModelApi.getExternalData(c);if(k){k=Tn(U7g,k);a:switch(h){case 3:var l=k.Wh(6,C7g).getFormat();l=Wn(l,1)+Wn(l,2)+Wn(l,3);break a;case 6:l=Vn(k,8)?1:0;break a;default:l=k.Wh(7,M7g).getColumnCount()}L(f,5,l);a:switch(h){case 3:h=k.Wh(6,C7g);h=Wn(h,3);break a;case 6:h=Vn(k,
8)?1:0;break a;default:h=Wn(k.Wh(7,M7g),2)}L(f,4,h)}h=new Ek;f=ak(h,16,f);f=Gk(f,!0);d=Wy(Vy(Ty(new Sy,41),d),f);a.D.C(e,Xy(d))}delete a.C[c]}}})}var $7g={},Z7g=($7g[2]=36294,$7g[3]=36567,$7g);function a8g(a,b){nJ.call(this,139);this.C=a||"";this.F=b}t(a8g,nJ);a8g.prototype.Id=function(){var a=new NSb;D(a,1,this.C);D(a,2,this.F);return a};a8g.prototype.xH=function(){return PSb.getDescriptor()};function b8g(a,b,c,d,e,f,h,k,l,n,q,r,w){Wqf.call(this,a,b,d,f,h,k,l);var x=this;this.Sa=ap("docs-chrome")?new X6g(b,this.F,l,q,f,c,n,d,w):null;this.qa(this.Sa);this.jb=f;this.Oa=new Vo(this);this.qa(this.Oa);this.Xa=new m7g(a,b,c,d,e,k,l);this.qa(this.Xa);this.ma=n;this.Ma=a.D.C;this.Ja=new Il;this.Qa=new X7g(l);this.fb=r;this.Va=new j7g(a,b,c,l,e,n,w);this.qa(this.Va);this.L=new Set;this.R=new Set;(b=eC.getInstance().C.newDatasourceIdFromOnboarding)?(this.L.add(b),c8g(this)):eC.getInstance().C.showBigSheetsOnboardingDialogOnStart&&
Ovb.isEnabled()&&this.J3a();this.Oa.listen(this.F,"db-execution-status-updated",this.rcc).listen(this.D,"na",this.Y4a);this.Ea=new Co;this.qa(this.Ea);Do(this.Ea,a.O.D,function(F){x.Y4a();d8g(x,F)})}t(b8g,Wqf);m=b8g.prototype;
m.uHa=function(a){a.C(Mvb,YR).D(Mvb,YR).C(Qvb,YR).C(Tvb,HDd).D(Tvb,HDd).C(LC,YR).D(LC,YR).C(Rvb,YR).C(lvb,HDd).C(Uvb,YR).C(Vvb,YR).C(MC,YR).C(Svb,YR).C(Hvb,YR).C(Jvb,YR).C(Ivb,YR).C(Wvb,IDd).D(Wvb,IDd).C(Kvb,GDd).C(Lvb,YR).D(Lvb,YR);z(y(),"fedp")&&a.C(Xub,YR);z(y(),"fedr")&&a.C($ub,YR);z(y(),"fedbc")&&a.C(Yub,YR);z(y(),"feci")&&a.C(Zub,YR);z(y(),"fedf")&&a.C(evb,YR);a.C(mvb,YR)};
m.y4a=function(){var a=this;this.V.subscribe(Qvb,"action",this.Ba).subscribe(Mvb,"action",this.Bub).subscribe(LC,"action",this.HMb).subscribe(Tvb,"action",this.Hfc).subscribe(Rvb,"action",function(b){return e8g(a,1,b)}).subscribe(Yub,"action",function(b){return e8g(a,2,b)}).subscribe(Zub,"action",function(b){return e8g(a,6,b)}).subscribe($ub,"action",function(b){return e8g(a,5,b)}).subscribe(Xub,"action",function(b){return e8g(a,3,b)}).subscribe(evb,"action",function(b){return e8g(a,4,b)}).subscribe(lvb,
"action",this.fKb).subscribe(Uvb,"action",this.Xka).subscribe(Vvb,"action",this.K3a).subscribe(mvb,"action",function(b){return f8g(a,b)}).subscribe(Wvb,"action",this.uNb).subscribe(Hvb,"action",function(){return g8g(a,null,!0)}).subscribe(Jvb,"action",this.Yjb).subscribe(Ivb,"action",this.Seb).subscribe(Kvb,"action",this.kjc).subscribe(Lvb,"action",this.Dub)};m.rcc=function(a){Y7g(this.Qa,a.D)};m.HMb=function(a){h8g(this,a.ag(),a.C)};
m.Hfc=function(a){var b=this,c=a.ag();if("pick-new source"==a.C)this.Xka(new Cpf(c,null));else{a=Jl(ritz_api.BigSheetsApi.getDatasourceSlotDeltaProto(c),rg);var d=this.Ja.Ld(Th.getDescriptor(),a),e=new YY(zK.getInstance());this.J.addCallback(function(f){if(z(y(),"fdcws")&&Wg(d,3)&&Wg(C(d,3),4)){var h=f.Tlb(c,d);b.qa(h);AY(b.C,h)}else if(!LC.isEnabled()&&Wg(d,3)&&Wg(C(d,3),4))h=f.Slb(c,d),b.qa(h),AY(b.C,h);else{var k=Zqf("Connecting to BigQuery\u2026");tqf(e).then(function(l){eA(dA.getInstance(),k);
l=f.PLa(c,d,l);b.qa(l);AY(b.C,l)},function(){eA(dA.getInstance(),k);if(Wg(d,3)&&Wg(C(d,3),1)){var l=f.QLa(c,d,[],!0);b.qa(l);AY(b.C,l)}else b.ofa()})}})}};m.K3a=function(a){var b=this;this.J.addCallback(function(c){var d=a.H,e=d?d.C:null;if(e){if(Wg(C(e,3),4)){var f=C(e,3);e=C(f,5);var h=new Th;D(h,2,2);var k=new Vh;f=C(f,4);var l=C(f,3)||"";f=l+(l?".":"")+C(f,2)+"."+f.getName();D(k,1,"select * from `"+f+"`");D(k,5,e);D(h,3,k);e=h}c=c.PLa(d.ag(),e,a.C)}else c=c.Mlb(a,d||void 0);b.qa(c);AY(b.C,c)})};
m.Bub=function(a){h8g(this,null,a.C)};function h8g(a,b,c){var d=null==b;c=new a8g(b,c);oJ(c,function(e,f){if(e){e=f.ag();f=ritz_api.BigSheetsApi.generateExternalDataIdForDatasourceSheet(e);var h=Jl(ritz_api.BigSheetsApi.createRefreshObjectRequestForDatasourceSheetInitialLoad(f,e),Fla);i8g(a,h,1,[f]);d?(a.L.add(e),c8g(a)):EK(a.F.xa,b)}});a.ma.C(c);d||opf(a.C)}
m.J3a=function(){var a=this,b=this.F.F.F["ritz-DisplayCountBigsheetsWelcomeDialog"],c=b.getValue();if(1<=c)this.Xka();else{b.setValue(Math.min(c+1,2147483647));var d=new a7g;this.qa(d);AY(this.C,d);d.getResult().then(function(e){e?a.Xka():Tf(d)},function(){Tf(d)})}};function c8g(a){var b=new c7g("//ssl.gstatic.com/docs/spreadsheets/bigsheets_loading_3.gif",a.O);a.qa(b);AY(a.C,b)}
function g8g(a,b,c){var d=wP(a.D);if(d&&aG(d)){var e=d.ag();EK(a.F.xa,e).then(function(f){var h=new P5g(f,e);f=new l6g(e,b,f,h,a.F.Va,c,a.ma,a.fb,a.Ma,a.O);a.qa(f);a.Oa.listen(f,"update",a.isb);AY(a.C,f)})}}m.Yjb=function(){var a=wP(this.D);a&&aG(a)&&(a=j8g(a),g8g(this,a[0],!0))};m.kjc=function(){var a=wP(this.D);a&&aG(a)&&(a=j8g(a),g8g(this,a[0],!1))};
m.Seb=function(){var a=this,b=wP(this.D);if(b&&aG(b)){var c=j8g(b),d=c.length;d=(new JA("{NUM_COLUMNS, plural,=1 {Are you sure you want to delete this calculated column?}other {Are you sure you want to delete {NUM_COLUMNS} calculated columns?}}")).format({NUM_COLUMNS:d});gSc(this.jb,d,function(){return k8g(a,b.ag(),c)})}};function k8g(a,b,c){b=new x7g(b,c);oJ(b,function(d){a.O.C(d?36648:36649)});a.ma.C(b)}
m.isb=function(a){var b=wP(this.D);b&&aG(b)&&b.ag()==a.Bv&&a.C&&(a=b.Ec(),b=a.Bg(),YH(a,d1b(a,VI(a,b-1,b))))};function j8g(a){a=a.Ec();var b=KI(a);return vDc(a,b).map(function(c){return C(c,2)})}
m.Y4a=function(){var a=wP(this.D);if(a&&aG(a)){var b=a.ag();if(this.L.has(b)){var c=ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(a.kb());if(c)if(c=rT(this.F.O,c),"fetch-successful"==c.getType()){a=a.Ec().Bg();var d=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(b);c=null;null!==d&&(d=parseInt(d,10),0<d&&(c=bEc.format(d)));a=new f7g(a,c);this.qa(a);AY(this.C,a,!0);this.L.delete(b)}else"fetch-failed"==c.getType()&&(npf(this.C)instanceof c7g&&ppf(this.C),this.L.delete(b))}}};
m.Xka=function(a){var b=this,c=new H5g(new YY(zK.getInstance()),this.O,a);this.qa(c);AY(this.C,c);c.getResult().then(function(d){b.K3a(d)},function(d){d&&b.ofa();Tf(c)});a=new rJ(c.getElement());L9b(a,"loadingGif","//ssl.gstatic.com/docs/spreadsheets/bigsheets_loading_3.gif");a.start()};m.ofa=function(){this.O.C(36685);arf("Could not connect to BigQuery")};
function e8g(a,b,c){var d=a.F.O,e=rT(d,c).C;null!=e&&e.Kk()&&37==e.getErrorCode()?o5g(d,c,function(){l8g(a,b,[c])},function(f){f=f.C;null!=f&&f.Kk()&&37==f.getErrorCode()?(f=Dpf(3,f),m8g(a,f,"Refresh failed")):l8g(a,b,[c])}):l8g(a,b,[c])}
function f8g(a,b){if(0!==b.length){var c=n8g(a,b);0<c.length?p5g(a.F.O,c,function(){l8g(a,null,b)},function(d){d=o8g(a,d);0<d.length?(d="You do not have access to the following BigQuery connection(s): \n\n"+(d.join(", ")+" \n\n Contact the owner of the sheet or your admin to request access. \n\n"),d=Pe(d),m8g(a,d,"Refresh failed")):l8g(a,null,b)}):l8g(a,null,b)}}
function n8g(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=rT(a.F.O,e).C;null!=f&&f.Kk()&&37==f.getErrorCode()&&c.push(e)}return c}function o8g(a,b){var c=[];b.forEach(function(d){var e=d.Uh();null!=e&&e.Kk()&&37==e.getErrorCode()&&(d=ritz_api.BigSheetsApi.getDataSourceIdForExternalDataId(d.As()),d=ritz_api.BigSheetsApi.getSheetIdForDatasourceId(d),d=VH(a.F.C,d).we(),c.push(d))});wd(c);return c}
function l8g(a,b,c){i8g(a,Jl(ritz_api.BigSheetsApi.createRefreshObjectRequest(c),Fla),b,c);p8g(a,c)}
function i8g(a,b,c,d){b=a.Ja.Ld(wgc.getDescriptor(),b);var e=(new Date).getTime();q5g(a.F.O,d);n5g(zK.getInstance(),b,a.Ma).then(function(f){var h=ah(f,2),k=1==d.length?d[0]:null;!h[0].Uh().Kk()&&k&&c&&(a.Qa.C[k]=new W7g(e,c));h=ja(h);for(k=h.next();!k.done;k=h.next()){var l=k.value;k=l.Uh();3===k.getState()&&(l=l.As(),Hjc(a.F.O,new Set([l]),k))}return f},function(f){var h=Hjc,k=a.F.O,l=new Set(d);f=C(f,2,0);h(k,l,f.Uh())})}
function p8g(a,b){if(0!=b.length){var c=new JA("{numObjects, plural, =1 {Refreshing object} other {Refreshing # objects}}");mJ(c.format({numObjects:b.length}));b.forEach(function(d){return a.R.add(d)})}}function d8g(a,b){0!=a.R.size&&(b.C.forEach(function(c){var d=rT(a.F.O,c);"loading"!=d.getType()&&"fetching-results"!=d.getType()&&a.R.delete(c)}),0==a.R.size&&"dbobjectmodel-event-update"==b.getType()&&mJ("Refresh complete"))}
m.fKb=function(a){if(a){var b=ritz_api.BigSheetsApi.isExternalDataForDbObject(a.As())?ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a.As()):0;a=E5g(b,a.C);m8g(this,a.body,a.title)}};function m8g(a,b,c){i7b(b,ba(),c,q8g,a.A_b,void 0,void 0,!1,"big-sheets-feedback")}m.uNb=function(){Rw("https://connectedsheets.page.link/tutorial",{target:"_blank"})};m.A_b=function(){Rw("https://connectedsheets.page.link/support")};m.Dub=function(){var a=wP(this.D);a&&aG(a)&&(mjc(this.F.xa),w7b(a.ag()))};
var q8g={ok:"OK",cancel:"Learn more"};function r8g(){A.call(this)}t(r8g,eJ);r8g.prototype.C=function(){return b8g};iJ("dbsource",r8g);
